{"id":"zellij-crew-0ao","title":"Write unit tests for tab position tracking","description":"Create unit tests for position tracking logic. Test: detect new tabs, track custom vs allocated names, handle tab reordering, preserve custom names across position changes.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:30:25.747937803-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:30:47.683209173-05:00","closed_at":"2026-01-19T16:30:47.683209173-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-0ao","depends_on_id":"zellij-crew-932","type":"blocks","created_at":"2026-01-19T13:30:39.683165707-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-1ic","title":"Create README.md with usage documentation","description":"Document plugin purpose, installation, configuration (actor_names parameter), default names list, build instructions, and usage examples","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:38.349096625-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:23:11.952633607-05:00","closed_at":"2026-01-19T16:23:11.952633607-05:00","close_reason":"Closed","labels":["docs"]}
{"id":"zellij-crew-4s8","title":"Create manual testing procedure document","description":"Document manual testing steps: load plugin in zellij, create/close tabs, verify name allocation, test configuration options, verify tab renaming behavior. Save as TESTING.md.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:30:27.179606019-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:23:11.953724486-05:00","closed_at":"2026-01-19T16:23:11.953724486-05:00","close_reason":"Closed"}
{"id":"zellij-crew-5m1","title":"Create DESIGN.md architecture and behavior specification","description":"Create comprehensive DESIGN.md documenting: (1) Project purpose - auto-rename zellij tabs with allocated names from a pool (2) Name allocation strategy - how names are assigned/reused based on tab position (3) Configuration options - name pools, behavior settings (4) State management - what data to track (5) Event flow - TabUpdate handling and rename triggers (6) Reference existing zellij-tab-bar-indexed analysis from zellij-crew-z7t notes. This document is critical - implementation cannot proceed without clear design specification.","status":"closed","priority":0,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:49:01.349230064-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:00:51.040914852-05:00","closed_at":"2026-01-19T16:00:51.040914852-05:00","close_reason":"Closed"}
{"id":"zellij-crew-7j1","title":"Implement name allocation algorithm","description":"Create find_available_name() to find first unused name from names list. Create should_rename() to check if tab name starts with 'Tab #'. Handle fallback to 'Tab #N' format when all names exhausted","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:37.125506061-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:22:13.577097812-05:00","closed_at":"2026-01-19T16:22:13.577097812-05:00","close_reason":"Closed","labels":["core"],"dependencies":[{"issue_id":"zellij-crew-7j1","depends_on_id":"zellij-crew-5m1","type":"blocks","created_at":"2026-01-19T13:49:10.623948555-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-7ok","title":"Rename the target executable zellij-crew not zellij_crew","status":"closed","priority":3,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T20:30:09.029371689-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T20:39:21.539496853-05:00","closed_at":"2026-01-19T20:39:21.539496853-05:00","close_reason":"Cargo already builds as zellij-crew.wasm (hyphen), removed old zellij_crew.wasm from config"}
{"id":"zellij-crew-7pk","title":"Fix plugin exit/crash and fill-in mode bugs","description":"Two critical bugs identified during testing:\n\n1. **Plugin keeps exiting** - Log shows repeated 'Bye from plugin X' messages. Plugin loads then exits within seconds. Need to investigate why.\n\n2. **Fill-in mode not working** - When closing 'bob' and creating new tab, got 'Tab #5' instead of 'bob'. Root cause was using tab.position as key, but positions shift when tabs close. FIXED by switching to name-based tracking.\n\nSession context:\n- Switched from lib.rs to main.rs (needed _start export)\n- Added ChangeApplicationState permission for rename_tab\n- Removed set_selectable(false) call\n- Rewrote state tracking to use used_names HashSet instead of assigned_names by position\n\nTesting needed after restart:\n- Verify plugin stays running (no repeated 'Bye' messages)\n- Test fill-in: alice,bob,carol,dave -\u003e close bob -\u003e new tab should be 'bob'\n- Test round-robin: same scenario should give 'eve' not 'bob'","notes":"## Session 3 - Root Cause Found and Fixed\n\n### The Real Bug (Zellij API Mismatch)\nTraced through zellij source code in /home/karl/workspace-wsl/zellij:\n\n1. **Tab struct** (zellij-server/src/tab/mod.rs:220-222):\n   - `index: usize` - stable ID, never changes\n   - `position: usize` - visual order, shifts when tabs close\n\n2. **TabInfo sent to plugins** (zellij-server/src/screen.rs:2048-2049):\n   - Only exposes `position`, NOT `index`\n\n3. **rename_tab handler** (zellij-server/src/screen.rs:5993):\n   ```rust\n   screen.tabs.get_mut(\u0026tab_index.saturating_sub(1))\n   ```\n   - `tabs` is `BTreeMap\u003cusize, Tab\u003e` keyed by **index**\n   - So rename_tab expects `index + 1`, not position!\n\n4. **Default tab names** (zellij-server/src/tab/mod.rs:698):\n   ```rust\n   format!(\"Tab #{}\", index + 1)\n   ```\n   - The number in \"Tab #N\" IS `index + 1`\n\n### The Fix\nParse the number from \"Tab #N\" instead of using position:\n\n```rust\nlet tab_index = match tab.name.strip_prefix(\"Tab #\").and_then(|s| s.parse::\u003cu32\u003e().ok()) {\n    Some(n) =\u003e n,  // Use the number from \"Tab #N\"\n    None =\u003e {\n        eprintln!(\"zellij-crew: can't rename '{}' - no stable index\", tab.name);\n        continue;\n    }\n};\n```\n\n### Example\n- Tabs: Tab #1 (idx=0), Tab #2 (idx=1), Tab #3 (idx=2), Tab #4 (idx=3)\n- Close Tab #2\n- Remaining: Tab #1 (pos=0), Tab #3 (pos=1), Tab #4 (pos=2)\n- Old code: rename_tab(pos+1=3) → renamed index 2 (Tab #3) WRONG\n- Fixed: parse \"4\" from \"Tab #4\", rename_tab(4) → renamed index 3 CORRECT\n\n### Status\n- Fix implemented and tested (cargo build, cargo test pass)\n- Ready for manual testing in live zellij session","status":"open","priority":0,"issue_type":"bug","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T19:05:45.462298439-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T20:27:59.979429304-05:00","comments":[{"id":1,"issue_id":"zellij-crew-7pk","author":"Karl Bunch","text":"Fixed the rename_tab position mismatch bug.\n\nRoot cause: Zellij API mismatch - TabInfo only exposes `position` (which shifts when tabs close) but rename_tab() expects the stable `index`. Traced through zellij source to confirm:\n- screen.tabs is BTreeMap\u003cusize, Tab\u003e keyed by index\n- rename_tab handler does tabs.get_mut(\u0026(tab_index - 1))\n- But TabInfo sent to plugins only has position, not index\n\nFix: Parse the number from \"Tab #N\" (which is index+1) instead of using position+1. This works because default tab names encode the stable index.\n\nTested and working.","created_at":"2026-01-20T02:01:06Z"}]}
{"id":"zellij-crew-91s","title":"Run cargo test and verify WASM build","description":"Run cargo test to execute unit tests. Verify WASM compilation with cargo build --release --target wasm32-wasip1. Ensure no compilation errors or test failures.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:30:28.606721681-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:31:21.472108388-05:00","closed_at":"2026-01-19T16:31:21.472108388-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-91s","depends_on_id":"zellij-crew-c5k","type":"blocks","created_at":"2026-01-19T13:30:40.97597335-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-91s","depends_on_id":"zellij-crew-0ao","type":"blocks","created_at":"2026-01-19T13:30:41.587477356-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-932","title":"Implement tab renaming with position tracking","description":"Call rename_tab((tab.position + 1) as u32, new_name) for new tabs. Track renamed positions to prevent re-renaming. Clean up renamed_positions for closed tabs","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:37.733268155-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:22:13.57805664-05:00","closed_at":"2026-01-19T16:22:13.57805664-05:00","close_reason":"Closed","labels":["core"],"dependencies":[{"issue_id":"zellij-crew-932","depends_on_id":"zellij-crew-5m1","type":"blocks","created_at":"2026-01-19T13:49:11.230364745-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-c5k","title":"Write unit tests for name allocation algorithm","description":"Create unit tests for the name allocation logic. Follow pattern from zellij default plugins using #[cfg(test)] modules. Test: allocate names from pool, handle pool exhaustion, position-based allocation, name reuse when tabs close.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:30:24.345344286-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:30:47.681929736-05:00","closed_at":"2026-01-19T16:30:47.681929736-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-c5k","depends_on_id":"zellij-crew-7j1","type":"blocks","created_at":"2026-01-19T13:30:38.383545564-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-cy9","title":"Create Cargo.toml with dependencies","description":"Create Cargo.toml file with zellij-tile 0.43.0 dependency, following the pattern from zellij-tab-bar-indexed","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:34.013899621-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:10:51.689792542-05:00","closed_at":"2026-01-19T16:10:51.689792542-05:00","close_reason":"Closed","labels":["setup"]}
{"id":"zellij-crew-edj","title":"Create .gitignore file","description":"Add standard Rust .gitignore entries: /target/, and .beads/ for beads database","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:35.276099386-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:10:51.6932842-05:00","closed_at":"2026-01-19T16:10:51.6932842-05:00","close_reason":"Closed","labels":["setup"]}
{"id":"zellij-crew-fo1","title":"Implement TabUpdate event handling and new tab detection","description":"Implement update() method to handle Event::TabUpdate. Detect new tabs by comparing previous_tabs positions with current_tabs. Only process tabs that don't exist in previous state","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:36.505401161-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:22:13.576140737-05:00","closed_at":"2026-01-19T16:22:13.576140737-05:00","close_reason":"Closed","labels":["core"],"dependencies":[{"issue_id":"zellij-crew-fo1","depends_on_id":"zellij-crew-5m1","type":"blocks","created_at":"2026-01-19T13:49:10.002096375-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-k6s","title":"Implement State struct and configuration parsing","description":"Create State struct with fields: names (Vec\u003cString\u003e), previous_tabs (Vec\u003cTabInfo\u003e), renamed_positions (HashSet\u003cusize\u003e). Implement load() to parse actor_names config with DEFAULT_NAMES fallback. Request permissions and subscribe to TabUpdate events","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:35.882793325-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:22:13.574894553-05:00","closed_at":"2026-01-19T16:22:13.574894553-05:00","close_reason":"Closed","labels":["core"],"dependencies":[{"issue_id":"zellij-crew-k6s","depends_on_id":"zellij-crew-5m1","type":"blocks","created_at":"2026-01-19T13:49:09.378259841-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-q4s","title":"Copy rust-toolchain.toml for WASM compatibility","description":"Copy rust-toolchain.toml from zellij-detach to ensure proper WASM target configuration","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:34.64851436-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:10:51.692090646-05:00","closed_at":"2026-01-19T16:10:51.692090646-05:00","close_reason":"Closed","labels":["setup"]}
{"id":"zellij-crew-z7t","title":"Research existing zellij-tab-bar-indexed","description":"Read all code in ../zellij-tab-bar-indexed (only 865 lines of code) for examples of how others have approach tab naming plugins. Present analysis and decide if we need to update our plan.","notes":"## Research Complete - Key Findings\n\n### Architecture (839 lines total)\n- main.rs: State management, event handling, plugin lifecycle\n- tab.rs: Tab rendering and styling  \n- line.rs: Tab line layout, overflow handling\n\n### Critical Patterns to Adopt\n1. State struct with tabs Vec, active_tab_idx, mode_info\n2. Config loading from BTreeMap\u003cString, String\u003e\n3. Event subscription: TabUpdate, ModeUpdate, Mouse\n4. Permission: Request ReadApplicationState\n5. Dependencies: zellij-tile 0.43, unicode-width, ansi_term\n\n### What They DON'T Do (Our Differentiator)\n- No automatic tab renaming - display only\n- No name allocation logic\n- No position-based name tracking\n- No custom naming schemes\n\n### Build Setup\n- Target: wasm32-wasip1 (set in .cargo/config.toml)\n- Release optimizations: opt-level=\"s\", lto=true, strip=true\n\n### Recommendation\nProceed with existing plan. Their plugin is good reference for boilerplate but our core functionality (automatic renaming with name pools) is entirely different.","status":"closed","priority":0,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:06:19.909793223-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T12:31:39.221356189-05:00","closed_at":"2026-01-19T12:31:39.221356189-05:00","close_reason":"Closed","labels":["research"]}
