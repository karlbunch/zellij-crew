{"id":"zellij-crew-0ao","title":"Write unit tests for tab position tracking","description":"Create unit tests for position tracking logic. Test: detect new tabs, track custom vs allocated names, handle tab reordering, preserve custom names across position changes.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:30:25.747937803-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:30:47.683209173-05:00","closed_at":"2026-01-19T16:30:47.683209173-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-0ao","depends_on_id":"zellij-crew-932","type":"blocks","created_at":"2026-01-19T13:30:39.683165707-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-0x9","title":"Track activity timestamps per pane","description":"Add activity tracking to TabState:\n\n1. Update last_activity on any pane output\n2. Subscribe to appropriate events for output detection\n3. Store timestamps in PaneState\n4. Handle pane creation/deletion","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:16:36.34213891-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:16:36.34213891-05:00","dependencies":[{"issue_id":"zellij-crew-0x9","depends_on_id":"zellij-crew-5ci","type":"parent","created_at":"2026-01-22T10:37:37.095820356-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-0x9","depends_on_id":"zellij-crew-lq5","type":"blocks","created_at":"2026-01-22T16:23:37.036842439-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-1ic","title":"Create README.md with usage documentation","description":"Document plugin purpose, installation, configuration (actor_names parameter), default names list, build instructions, and usage examples","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:38.349096625-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:23:11.952633607-05:00","closed_at":"2026-01-19T16:23:11.952633607-05:00","close_reason":"Closed","labels":["docs"]}
{"id":"zellij-crew-4j0","title":"Study and document default tab-bar plugin structure","description":"Analyze zellij's default tab-bar plugin structure:\n\n1. main.rs: State, load(), update(), render() lifecycle\n2. tab.rs: Tab rendering, cursors(), render_tab()\n3. line.rs: Layout, overflow handling, tab_line()\n\nDocument key patterns:\n- LinePart struct for styled output\n- How multi-user indicators are rendered\n- Mouse click handling for tab selection\n- Color/palette integration","notes":"## Analysis of Zellij Default Tab-Bar Plugin\n\n### File Structure (3 files, ~620 lines total)\n- `main.rs` (164 lines): Plugin lifecycle, state management\n- `tab.rs` (141 lines): Individual tab rendering, multi-user indicators\n- `line.rs` (465 lines): Tab line layout, overflow handling, keybind display\n\n### Key Data Structures\n\n**LinePart** - Core rendering unit:\n```rust\npub struct LinePart {\n    part: String,       // ANSI-styled text\n    len: usize,         // Visual width (for layout)\n    tab_index: Option\u003cusize\u003e,  // For mouse click handling\n}\n```\n\n**State** - Plugin state:\n```rust\nstruct State {\n    tabs: Vec\u003cTabInfo\u003e,\n    active_tab_idx: usize,\n    mode_info: ModeInfo,           // Contains palette/colors\n    tab_line: Vec\u003cLinePart\u003e,       // Cached for mouse clicks\n    hide_swap_layout_indication: bool,\n}\n```\n\n### Plugin Lifecycle\n\n**load():**\n- Parse config from BTreeMap\u003cString, String\u003e\n- Call set_selectable(false) - tab bar not focusable\n- Subscribe to: TabUpdate, ModeUpdate, Mouse\n\n**update():**\n- ModeUpdate: Store mode_info (contains colors/palette)\n- TabUpdate: Store tabs, find active_tab_idx\n- Mouse: Handle LeftClick (tab switch), ScrollUp/Down (tab navigation)\n- Returns bool for should_render\n\n**render():**\n- Build LinePart for each tab via tab_style()\n- Call tab_line() to layout with overflow handling\n- Print with ANSI background fill\n\n### Multi-User Indicator Pattern (tab.rs:7-21, 59-82)\n\n```rust\nfn cursors(focused_clients: \u0026[ClientId], colors: MultiplayerColors) -\u003e (Vec\u003cANSIString\u003e, usize) {\n    for client_id in focused_clients {\n        if let Some(color) = client_id_to_colors(*client_id, colors) {\n            cursors.push(style!(color.1, color.0).paint(\" \"));  // Colored space\n        }\n    }\n}\n```\n\nRendered as: `tabname[‚ñ† ‚ñ†]` where each ‚ñ† is a colored space for each other user.\n\n### Tab Styling (tab.rs:23-89)\n\nKey points:\n- Uses `palette.ribbon_selected` / `ribbon_unselected` for colors\n- Appends \"(FULLSCREEN)\" or \"(SYNC)\" to tab name\n- Separator character: \"\" (powerline arrow) or empty\n- Tab text wrapped with separators: `‚îÇ tabname ‚îÇ`\n\n### Overflow Handling (line.rs:15-108)\n\nWhen tabs dont fit:\n- Shows active tab first\n- Adds tabs left/right alternately while they fit\n- Collapsed indicators: `‚Üê +N` and `+N ‚Üí`\n- Clicking collapsed indicator jumps to hidden tabs\n\n### Dependencies\n```toml\nansi_term = \"0.12\"      # ANSI styling\nunicode-width = \"0.1.8\" # Unicode char width calculation\nzellij-tile             # Plugin API\nzellij-tile-utils       # style!() macro\n```\n\n### Patterns to Adopt for zellij-crew\n\n1. **LinePart pattern** - Separate styled content from width tracking\n2. **tab_style() ‚Üí render_tab()** - Two-level abstraction\n3. **Mouse handling** - Store tab_line for click detection\n4. **Palette integration** - Use mode_info.style.colors\n5. **set_selectable(false)** - Tab bar shouldnt steal focus\n\n### Activity Indicator Integration Point\n\nIn `render_tab()` (tab.rs:59-82), after tab text, add our indicator:\n```rust\n// After existing multi-user cursor section\nif let Some(indicator) = get_activity_indicator(tab) {\n    s.push_str(\u0026indicator_styled);\n    tab_text_len += indicator_len;\n}\n```\n\n### What We Need to Add\n\n1. **TabState integration** - Track pane activity per tab\n2. **Indicator rendering** - Similar pattern to cursors()\n3. **Config for indicators** - Customizable symbols/colors\n4. **Pipe message handling** - New event subscription","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:05:07.182335038-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T20:23:43.435994352-05:00","closed_at":"2026-01-22T20:23:43.435994352-05:00","close_reason":"Analysis complete - documented plugin structure, key patterns, and integration points for activity indicators","dependencies":[{"issue_id":"zellij-crew-4j0","depends_on_id":"zellij-crew-aja","type":"parent","created_at":"2026-01-22T10:05:40.54003347-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-4jx","title":"Document and test Claude hook integration","description":"Create documentation and test Claude Code hook integration:\n\n1. Document .claude/settings.json hook configuration\n2. Create example hooks for PreToolUse, PostToolUse, Stop, Notification\n3. Test with actual Claude Code session\n4. Document shell integration (precmd/preexec) as optional\n5. Add troubleshooting section","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:06:06.17096409-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:06:06.17096409-05:00","dependencies":[{"issue_id":"zellij-crew-4jx","depends_on_id":"zellij-crew-lq5","type":"parent","created_at":"2026-01-22T10:06:44.380997784-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-4jx","depends_on_id":"zellij-crew-9km","type":"blocks","created_at":"2026-01-22T10:06:46.161027361-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-4s8","title":"Create manual testing procedure document","description":"Document manual testing steps: load plugin in zellij, create/close tabs, verify name allocation, test configuration options, verify tab renaming behavior. Save as TESTING.md.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:30:27.179606019-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:23:11.953724486-05:00","closed_at":"2026-01-19T16:23:11.953724486-05:00","close_reason":"Closed"}
{"id":"zellij-crew-54d","title":"Add configurable indicator symbols","description":"Make all indicators configurable via KDL:\n\nindicator_idle \"‚óã\"\nindicator_running \"‚óê\"\nindicator_working \"‚óè\"\nindicator_question \"?\"\nindicator_sleeping \"üò¥\"\nindicator_done \"‚úì\"\nindicator_error \"!\"\n\nParse in Config, use in rendering.","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:42:43.096836632-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:42:43.096836632-05:00","dependencies":[{"issue_id":"zellij-crew-54d","depends_on_id":"zellij-crew-dvu","type":"parent","created_at":"2026-01-22T10:45:31.695709612-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-54d","depends_on_id":"zellij-crew-f6x","type":"blocks","created_at":"2026-01-22T16:23:37.644942254-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-54d","depends_on_id":"zellij-crew-5ci","type":"blocks","created_at":"2026-01-22T16:23:38.243469875-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-5ci","title":"Phase 2d: Timeout Detection (Sleeping State)","description":"Implement timeout-based sleeping detection for honest uncertainty.\n\nDeliverables:\n- Timer-based activity monitoring\n- Sleeping state when no output for N seconds\n- Configurable timeout (default 30s, 0 to disable)","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T09:06:41.52207293-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T09:06:41.52207293-05:00","dependencies":[{"issue_id":"zellij-crew-5ci","depends_on_id":"zellij-crew-s00","type":"parent","created_at":"2026-01-22T10:04:16.818978162-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-5ci","depends_on_id":"zellij-crew-lq5","type":"blocks","created_at":"2026-01-22T10:04:47.275723016-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-5m1","title":"Create DESIGN.md architecture and behavior specification","description":"Create comprehensive DESIGN.md documenting: (1) Project purpose - auto-rename zellij tabs with allocated names from a pool (2) Name allocation strategy - how names are assigned/reused based on tab position (3) Configuration options - name pools, behavior settings (4) State management - what data to track (5) Event flow - TabUpdate handling and rename triggers (6) Reference existing zellij-tab-bar-indexed analysis from zellij-crew-z7t notes. This document is critical - implementation cannot proceed without clear design specification.","status":"closed","priority":0,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:49:01.349230064-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:00:51.040914852-05:00","closed_at":"2026-01-19T16:00:51.040914852-05:00","close_reason":"Closed"}
{"id":"zellij-crew-5qx","title":"Implement prompt regex matching","description":"Detect shell prompts from terminal content:\n\n1. Only check last N characters (configurable, default 500)\n2. Strip ANSI escape codes before matching\n3. Configurable prompt patterns with anchors (^/$)\n4. Default patterns: shell ($#%\u003e‚ùØ), Python (\u003e\u003e\u003e), etc.\n5. Update TabState with ContentMatch source when prompt detected","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:07:03.139122083-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:07:03.139122083-05:00","dependencies":[{"issue_id":"zellij-crew-5qx","depends_on_id":"zellij-crew-f6x","type":"parent","created_at":"2026-01-22T10:16:25.344478041-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-5qx","depends_on_id":"zellij-crew-om9","type":"blocks","created_at":"2026-01-22T10:16:26.567208734-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-7j1","title":"Implement name allocation algorithm","description":"Create find_available_name() to find first unused name from names list. Create should_rename() to check if tab name starts with 'Tab #'. Handle fallback to 'Tab #N' format when all names exhausted","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:37.125506061-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:22:13.577097812-05:00","closed_at":"2026-01-19T16:22:13.577097812-05:00","close_reason":"Closed","labels":["core"],"dependencies":[{"issue_id":"zellij-crew-7j1","depends_on_id":"zellij-crew-5m1","type":"blocks","created_at":"2026-01-19T13:49:10.623948555-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-7ok","title":"Rename the target executable zellij-crew not zellij_crew","status":"closed","priority":3,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T20:30:09.029371689-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T20:39:21.539496853-05:00","closed_at":"2026-01-19T20:39:21.539496853-05:00","close_reason":"Cargo already builds as zellij-crew.wasm (hyphen), removed old zellij_crew.wasm from config"}
{"id":"zellij-crew-7pk","title":"Fix plugin exit/crash and fill-in mode bugs","description":"Two critical bugs identified during testing:\n\n1. **Plugin keeps exiting** - Log shows repeated 'Bye from plugin X' messages. Plugin loads then exits within seconds. Need to investigate why.\n\n2. **Fill-in mode not working** - When closing 'bob' and creating new tab, got 'Tab #5' instead of 'bob'. Root cause was using tab.position as key, but positions shift when tabs close. FIXED by switching to name-based tracking.\n\nSession context:\n- Switched from lib.rs to main.rs (needed _start export)\n- Added ChangeApplicationState permission for rename_tab\n- Removed set_selectable(false) call\n- Rewrote state tracking to use used_names HashSet instead of assigned_names by position\n\nTesting needed after restart:\n- Verify plugin stays running (no repeated 'Bye' messages)\n- Test fill-in: alice,bob,carol,dave -\u003e close bob -\u003e new tab should be 'bob'\n- Test round-robin: same scenario should give 'eve' not 'bob'","notes":"## Session 3 - Root Cause Found and Fixed\n\n### The Real Bug (Zellij API Mismatch)\nTraced through zellij source code in /home/karl/workspace-wsl/zellij:\n\n1. **Tab struct** (zellij-server/src/tab/mod.rs:220-222):\n   - `index: usize` - stable ID, never changes\n   - `position: usize` - visual order, shifts when tabs close\n\n2. **TabInfo sent to plugins** (zellij-server/src/screen.rs:2048-2049):\n   - Only exposes `position`, NOT `index`\n\n3. **rename_tab handler** (zellij-server/src/screen.rs:5993):\n   ```rust\n   screen.tabs.get_mut(\u0026tab_index.saturating_sub(1))\n   ```\n   - `tabs` is `BTreeMap\u003cusize, Tab\u003e` keyed by **index**\n   - So rename_tab expects `index + 1`, not position!\n\n4. **Default tab names** (zellij-server/src/tab/mod.rs:698):\n   ```rust\n   format!(\"Tab #{}\", index + 1)\n   ```\n   - The number in \"Tab #N\" IS `index + 1`\n\n### The Fix\nParse the number from \"Tab #N\" instead of using position:\n\n```rust\nlet tab_index = match tab.name.strip_prefix(\"Tab #\").and_then(|s| s.parse::\u003cu32\u003e().ok()) {\n    Some(n) =\u003e n,  // Use the number from \"Tab #N\"\n    None =\u003e {\n        eprintln!(\"zellij-crew: can't rename '{}' - no stable index\", tab.name);\n        continue;\n    }\n};\n```\n\n### Example\n- Tabs: Tab #1 (idx=0), Tab #2 (idx=1), Tab #3 (idx=2), Tab #4 (idx=3)\n- Close Tab #2\n- Remaining: Tab #1 (pos=0), Tab #3 (pos=1), Tab #4 (pos=2)\n- Old code: rename_tab(pos+1=3) ‚Üí renamed index 2 (Tab #3) WRONG\n- Fixed: parse \"4\" from \"Tab #4\", rename_tab(4) ‚Üí renamed index 3 CORRECT\n\n### Status\n- Fix implemented and tested (cargo build, cargo test pass)\n- Ready for manual testing in live zellij session","status":"open","priority":0,"issue_type":"bug","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T19:05:45.462298439-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T20:27:59.979429304-05:00","comments":[{"id":1,"issue_id":"zellij-crew-7pk","author":"Karl Bunch","text":"Fixed the rename_tab position mismatch bug.\n\nRoot cause: Zellij API mismatch - TabInfo only exposes `position` (which shifts when tabs close) but rename_tab() expects the stable `index`. Traced through zellij source to confirm:\n- screen.tabs is BTreeMap\u003cusize, Tab\u003e keyed by index\n- rename_tab handler does tabs.get_mut(\u0026(tab_index - 1))\n- But TabInfo sent to plugins only has position, not index\n\nFix: Parse the number from \"Tab #N\" (which is index+1) instead of using position+1. This works because default tab names encode the stable index.\n\nTested and working.","created_at":"2026-01-20T02:01:06Z"}]}
{"id":"zellij-crew-91s","title":"Run cargo test and verify WASM build","description":"Run cargo test to execute unit tests. Verify WASM compilation with cargo build --release --target wasm32-wasip1. Ensure no compilation errors or test failures.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:30:28.606721681-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:31:21.472108388-05:00","closed_at":"2026-01-19T16:31:21.472108388-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-91s","depends_on_id":"zellij-crew-c5k","type":"blocks","created_at":"2026-01-19T13:30:40.97597335-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-91s","depends_on_id":"zellij-crew-0ao","type":"blocks","created_at":"2026-01-19T13:30:41.587477356-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-932","title":"Implement tab renaming with position tracking","description":"Call rename_tab((tab.position + 1) as u32, new_name) for new tabs. Track renamed positions to prevent re-renaming. Clean up renamed_positions for closed tabs","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:37.733268155-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:22:13.57805664-05:00","closed_at":"2026-01-19T16:22:13.57805664-05:00","close_reason":"Closed","labels":["core"],"dependencies":[{"issue_id":"zellij-crew-932","depends_on_id":"zellij-crew-5m1","type":"blocks","created_at":"2026-01-19T13:49:11.230364745-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-9km","title":"Render activity indicators from TabState","description":"Update tab rendering to show activity indicators:\n\n1. Look up PaneState for each tab's focused pane\n2. Render indicator based on status (idle: ‚óã, running: ‚óê, working: ‚óè, question: ?, sleeping: üò¥)\n3. Position indicator after tab name\n4. Handle indicator colors from palette","status":"open","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:06:04.388474097-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:06:04.388474097-05:00","dependencies":[{"issue_id":"zellij-crew-9km","depends_on_id":"zellij-crew-lq5","type":"parent","created_at":"2026-01-22T10:06:43.786966262-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-9km","depends_on_id":"zellij-crew-bgb","type":"blocks","created_at":"2026-01-22T10:06:45.569328224-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-aja","title":"Phase 2a: Tab-Bar Foundation","description":"Fork default tab-bar plugin structure and integrate existing naming logic.\n\nDeliverables:\n- New plugin that renders a functional tab bar\n- Existing name allocation logic integrated\n- Basic state management","status":"open","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T09:06:35.450590127-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T09:06:35.450590127-05:00","dependencies":[{"issue_id":"zellij-crew-aja","depends_on_id":"zellij-crew-s00","type":"parent","created_at":"2026-01-22T10:04:15.004862113-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-bgb","title":"Subscribe to pipe messages and parse protocol","description":"Handle incoming pipe messages:\n\n1. Subscribe to appropriate event for pipe messages\n2. Parse messages matching 'zellij-crew:status' namespace\n3. Extract pane_id and state from args: 'pane=ID,state=STATE'\n4. Supported states: idle, running, working, thinking, tool:NAME, waiting, question, done, error\n5. Update TabState with Pipe source (highest priority)","status":"open","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:06:02.633108021-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:06:02.633108021-05:00","dependencies":[{"issue_id":"zellij-crew-bgb","depends_on_id":"zellij-crew-lq5","type":"parent","created_at":"2026-01-22T10:06:43.185422444-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-bgb","depends_on_id":"zellij-crew-ebx","type":"blocks","created_at":"2026-01-22T10:06:44.978180239-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-bk0","title":"Integrate existing naming logic into tab-bar","description":"Merge the existing name allocation code into the new tab-bar plugin:\n\n1. Move Config struct and parsing\n2. Move name allocation (round-robin, fill-in)\n3. Move used_names tracking\n4. Remove rename_tab() calls - names are now rendered directly\n5. Ensure backward-compatible config (names, mode, show_position)","status":"open","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:05:10.731942222-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:05:10.731942222-05:00","dependencies":[{"issue_id":"zellij-crew-bk0","depends_on_id":"zellij-crew-aja","type":"parent","created_at":"2026-01-22T10:05:41.757329316-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-bk0","depends_on_id":"zellij-crew-q02","type":"blocks","created_at":"2026-01-22T10:05:43.548763041-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-c5k","title":"Write unit tests for name allocation algorithm","description":"Create unit tests for the name allocation logic. Follow pattern from zellij default plugins using #[cfg(test)] modules. Test: allocate names from pool, handle pool exhaustion, position-based allocation, name reuse when tabs close.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:30:24.345344286-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:30:47.681929736-05:00","closed_at":"2026-01-19T16:30:47.681929736-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-c5k","depends_on_id":"zellij-crew-7j1","type":"blocks","created_at":"2026-01-19T13:30:38.383545564-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-cy9","title":"Create Cargo.toml with dependencies","description":"Create Cargo.toml file with zellij-tile 0.43.0 dependency, following the pattern from zellij-tab-bar-indexed","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:34.013899621-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:10:51.689792542-05:00","closed_at":"2026-01-19T16:10:51.689792542-05:00","close_reason":"Closed","labels":["setup"]}
{"id":"zellij-crew-dvu","title":"Phase 2e: Polish and Configuration","description":"Final polish, configuration options, and performance tuning.\n\nDeliverables:\n- Configurable indicators (customizable symbols)\n- Color theming integration\n- Performance optimization\n- Documentation updates","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T09:06:43.243912092-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T09:06:43.243912092-05:00","dependencies":[{"issue_id":"zellij-crew-dvu","depends_on_id":"zellij-crew-s00","type":"parent","created_at":"2026-01-22T10:04:17.426701648-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-dvu","depends_on_id":"zellij-crew-f6x","type":"blocks","created_at":"2026-01-22T10:04:47.876261965-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-dvu","depends_on_id":"zellij-crew-5ci","type":"blocks","created_at":"2026-01-22T10:04:48.467366336-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-ebx","title":"Implement TabState struct","description":"Create TabState as the central state manager:\n\n- TabState with panes: HashMap\u003cPaneId, PaneState\u003e\n- PaneState with status, source, last_activity, last_updated\n- PaneStatus enum: Unknown, Idle, Running, Working, Waiting, Question, Sleeping\n- SignalSource enum: Pipe, ContentMatch, Timeout, None\n\nMethods: update_from_pipe(), update_from_content(), check_timeouts(), get_effective_state()","status":"open","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:06:00.813940509-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:06:00.813940509-05:00","dependencies":[{"issue_id":"zellij-crew-ebx","depends_on_id":"zellij-crew-lq5","type":"parent","created_at":"2026-01-22T10:06:42.57764943-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-ebx","depends_on_id":"zellij-crew-aja","type":"blocks","created_at":"2026-01-22T16:23:35.789224169-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-ecv","title":"Update README and documentation","description":"Update all documentation for Phase 2:\n\n1. README.md: new features, configuration options\n2. DESIGN.md: mark Phase 2 sections as implemented\n3. Add HOOKS.md: Claude hook setup guide\n4. Update TESTING.md with new test scenarios\n5. Add troubleshooting section","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:43:08.005761443-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:43:08.005761443-05:00","dependencies":[{"issue_id":"zellij-crew-ecv","depends_on_id":"zellij-crew-dvu","type":"parent","created_at":"2026-01-22T10:45:33.659918739-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-ecv","depends_on_id":"zellij-crew-f5l","type":"blocks","created_at":"2026-01-22T10:45:35.628282749-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-edj","title":"Create .gitignore file","description":"Add standard Rust .gitignore entries: /target/, and .beads/ for beads database","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:35.276099386-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:10:51.6932842-05:00","closed_at":"2026-01-19T16:10:51.6932842-05:00","close_reason":"Closed","labels":["setup"]}
{"id":"zellij-crew-f5l","title":"Performance optimization and testing","description":"Optimize and stress-test the plugin:\n\n1. Profile with many tabs (20+)\n2. Test with high-output commands (yes, cat large file)\n3. Measure memory usage\n4. Optimize hot paths\n5. Add performance notes to docs","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:43:00.122222507-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:43:00.122222507-05:00","dependencies":[{"issue_id":"zellij-crew-f5l","depends_on_id":"zellij-crew-dvu","type":"parent","created_at":"2026-01-22T10:45:33.001617616-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-f5l","depends_on_id":"zellij-crew-hsy","type":"blocks","created_at":"2026-01-22T10:45:34.948273001-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-f6x","title":"Phase 2c: Content Analysis (Fallback Detection)","description":"Implement terminal content analysis as fallback when no explicit signals.\n\nDeliverables:\n- PaneContents permission and retrieval\n- Debounced analysis (not on every output)\n- Prompt regex matching with performance safeguards\n- ANSI escape code stripping","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T09:06:39.754433466-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T09:06:39.754433466-05:00","dependencies":[{"issue_id":"zellij-crew-f6x","depends_on_id":"zellij-crew-s00","type":"parent","created_at":"2026-01-22T10:04:16.213522961-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-f6x","depends_on_id":"zellij-crew-lq5","type":"blocks","created_at":"2026-01-22T10:04:46.669769215-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-fo1","title":"Implement TabUpdate event handling and new tab detection","description":"Implement update() method to handle Event::TabUpdate. Detect new tabs by comparing previous_tabs positions with current_tabs. Only process tabs that don't exist in previous state","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:36.505401161-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:22:13.576140737-05:00","closed_at":"2026-01-19T16:22:13.576140737-05:00","close_reason":"Closed","labels":["core"],"dependencies":[{"issue_id":"zellij-crew-fo1","depends_on_id":"zellij-crew-5m1","type":"blocks","created_at":"2026-01-19T13:49:10.002096375-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-fxi","title":"Implement sleeping state detection","description":"Detect and display sleeping state:\n\n1. Set up periodic timer (every 5 seconds)\n2. Check each pane: if status==Unknown AND elapsed \u003e sleep_timeout ‚Üí Sleeping\n3. Render üò¥ indicator for sleeping panes\n4. Clear sleeping state on any activity\n5. Configuration: sleep_timeout_secs (default 30, 0 to disable)","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:16:38.166191338-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:16:38.166191338-05:00","dependencies":[{"issue_id":"zellij-crew-fxi","depends_on_id":"zellij-crew-5ci","type":"parent","created_at":"2026-01-22T10:37:37.724198175-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-fxi","depends_on_id":"zellij-crew-0x9","type":"blocks","created_at":"2026-01-22T10:37:38.341860001-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-h9a","title":"Request ReadPaneContents permission and get content","description":"Set up pane content access:\n\n1. Add PermissionType::ReadPaneContents to permission request\n2. Use get_pane_scrollback(pane_id, false) to get viewport\n3. Track which panes need analysis (those without pipe signals)\n4. Only fetch content when analysis is needed","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:06:59.465585505-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:06:59.465585505-05:00","dependencies":[{"issue_id":"zellij-crew-h9a","depends_on_id":"zellij-crew-f6x","type":"parent","created_at":"2026-01-22T10:16:24.116866121-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-h9a","depends_on_id":"zellij-crew-lq5","type":"blocks","created_at":"2026-01-22T16:23:36.414630767-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-hsy","title":"Integrate color theming from palette","description":"Use Zellij's palette for indicator colors:\n\n1. Get colors from ModeInfo.style.colors\n2. Map states to appropriate palette colors\n3. Support both default and custom themes\n4. Handle 16-color vs 256-color terminals","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:42:52.835570917-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:42:52.835570917-05:00","dependencies":[{"issue_id":"zellij-crew-hsy","depends_on_id":"zellij-crew-dvu","type":"parent","created_at":"2026-01-22T10:45:32.354900391-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-hsy","depends_on_id":"zellij-crew-54d","type":"blocks","created_at":"2026-01-22T10:45:34.310190775-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-k6s","title":"Implement State struct and configuration parsing","description":"Create State struct with fields: names (Vec\u003cString\u003e), previous_tabs (Vec\u003cTabInfo\u003e), renamed_positions (HashSet\u003cusize\u003e). Implement load() to parse actor_names config with DEFAULT_NAMES fallback. Request permissions and subscribe to TabUpdate events","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:35.882793325-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:22:13.574894553-05:00","closed_at":"2026-01-19T16:22:13.574894553-05:00","close_reason":"Closed","labels":["core"],"dependencies":[{"issue_id":"zellij-crew-k6s","depends_on_id":"zellij-crew-5m1","type":"blocks","created_at":"2026-01-19T13:49:09.378259841-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-lq5","title":"Phase 2b: Pipe Integration and TabState","description":"Implement TabState as single source of truth and pipe message handling.\n\nDeliverables:\n- TabState struct tracking per-pane activity\n- Pipe protocol parsing (zellij-crew:status)\n- Indicators update from pipe signals\n- Claude hook integration documented/tested","status":"open","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T09:06:37.251173787-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T09:06:37.251173787-05:00","dependencies":[{"issue_id":"zellij-crew-lq5","depends_on_id":"zellij-crew-s00","type":"parent","created_at":"2026-01-22T10:04:15.605148722-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-lq5","depends_on_id":"zellij-crew-aja","type":"blocks","created_at":"2026-01-22T10:04:46.078336011-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-om9","title":"Implement debounced content analysis","description":"Add performance safeguards for content analysis:\n\n1. Only analyze after output stops (configurable delay, default 200ms)\n2. Use timer events for debouncing\n3. Skip analysis if pane has recent pipe signal\n4. Rate limit: max one analysis per pane per second\n5. Track last_analyzed timestamp per pane","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:07:01.30664917-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:07:01.30664917-05:00","dependencies":[{"issue_id":"zellij-crew-om9","depends_on_id":"zellij-crew-f6x","type":"parent","created_at":"2026-01-22T10:16:24.729128662-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-om9","depends_on_id":"zellij-crew-h9a","type":"blocks","created_at":"2026-01-22T10:16:25.958606265-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-q02","title":"Create new tab-bar module structure","description":"Set up the new tab-bar plugin structure:\n\n1. Restructure src/ for tab-bar rendering\n2. Add LinePart struct for styled output segments\n3. Create State struct extending current state with mode_info, tab_line cache\n4. Subscribe to ModeUpdate, Mouse events (in addition to TabUpdate)\n5. Implement basic render() that outputs tab names","status":"open","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:05:08.982806763-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:05:08.982806763-05:00","dependencies":[{"issue_id":"zellij-crew-q02","depends_on_id":"zellij-crew-aja","type":"parent","created_at":"2026-01-22T10:05:41.154467029-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-q02","depends_on_id":"zellij-crew-4j0","type":"blocks","created_at":"2026-01-22T10:05:42.95489373-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-q4s","title":"Copy rust-toolchain.toml for WASM compatibility","description":"Copy rust-toolchain.toml from zellij-detach to ensure proper WASM target configuration","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:34.64851436-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:10:51.692090646-05:00","closed_at":"2026-01-19T16:10:51.692090646-05:00","close_reason":"Closed","labels":["setup"]}
{"id":"zellij-crew-s00","title":"Phase 2: Tab-Bar Plugin with Activity Indicators","description":"Evolve zellij-crew from a rename-only plugin into a full tab-bar replacement with activity indicators.\n\nKey components:\n- TabState: single source of truth for pane activity\n- Signal priority: pipe \u003e content_match \u003e timeout\n- Pipe protocol: zellij-crew:status for Claude hooks and shell integration\n- Sleeping state for honest uncertainty\n\nSee DESIGN.md Phase 2 section for full architecture.","status":"open","priority":1,"issue_type":"epic","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T09:06:21.634729854-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T09:06:21.634729854-05:00"}
{"id":"zellij-crew-s34","title":"Implement basic tab rendering with indicators placeholder","description":"Implement render() to display tabs with allocated names:\n\n1. Style active vs inactive tabs\n2. Handle tab overflow (too many tabs for width)\n3. Add placeholder for activity indicators (populated in 2b)\n4. Support mouse clicks for tab switching\n5. Match default tab-bar visual style","status":"open","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:05:12.623393666-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:05:12.623393666-05:00","dependencies":[{"issue_id":"zellij-crew-s34","depends_on_id":"zellij-crew-aja","type":"parent","created_at":"2026-01-22T10:05:42.368396957-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-s34","depends_on_id":"zellij-crew-bk0","type":"blocks","created_at":"2026-01-22T10:05:44.13969463-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-z7t","title":"Research existing zellij-tab-bar-indexed","description":"Read all code in ../zellij-tab-bar-indexed (only 865 lines of code) for examples of how others have approach tab naming plugins. Present analysis and decide if we need to update our plan.","notes":"## Research Complete - Key Findings\n\n### Architecture (839 lines total)\n- main.rs: State management, event handling, plugin lifecycle\n- tab.rs: Tab rendering and styling  \n- line.rs: Tab line layout, overflow handling\n\n### Critical Patterns to Adopt\n1. State struct with tabs Vec, active_tab_idx, mode_info\n2. Config loading from BTreeMap\u003cString, String\u003e\n3. Event subscription: TabUpdate, ModeUpdate, Mouse\n4. Permission: Request ReadApplicationState\n5. Dependencies: zellij-tile 0.43, unicode-width, ansi_term\n\n### What They DON'T Do (Our Differentiator)\n- No automatic tab renaming - display only\n- No name allocation logic\n- No position-based name tracking\n- No custom naming schemes\n\n### Build Setup\n- Target: wasm32-wasip1 (set in .cargo/config.toml)\n- Release optimizations: opt-level=\"s\", lto=true, strip=true\n\n### Recommendation\nProceed with existing plan. Their plugin is good reference for boilerplate but our core functionality (automatic renaming with name pools) is entirely different.","status":"closed","priority":0,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:06:19.909793223-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T12:31:39.221356189-05:00","closed_at":"2026-01-19T12:31:39.221356189-05:00","close_reason":"Closed","labels":["research"]}
