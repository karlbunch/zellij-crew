{"id":"zellij-crew-02p","title":"Intermittent: Claude hook status updates sometimes don't take effect","description":"Claude Code hooks (PreToolUse‚Üíworking, Stop‚Üíidle, etc.) sometimes fail to update the tab status indicator. Pattern not yet identified - could be a race between pipe delivery and leader state, or the hook firing in a context where ZELLIJ_PANE_ID isn't set. Needs a repro session with debug logging to narrow down.","status":"open","priority":2,"issue_type":"bug","owner":"karlbunch@karlbunch.com","created_at":"2026-02-13T18:25:17.881088131-05:00","created_by":"Karl Bunch","updated_at":"2026-02-13T18:25:24.294737647-05:00"}
{"id":"zellij-crew-0ao","title":"Write unit tests for tab position tracking","description":"Create unit tests for position tracking logic. Test: detect new tabs, track custom vs allocated names, handle tab reordering, preserve custom names across position changes.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:30:25.747937803-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:30:47.683209173-05:00","closed_at":"2026-01-19T16:30:47.683209173-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-0ao","depends_on_id":"zellij-crew-932","type":"blocks","created_at":"2026-01-19T13:30:39.683165707-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-0x9","title":"Track activity timestamps per pane","description":"Add activity tracking to TabState:\n\n1. Update last_activity on any pane output\n2. Subscribe to appropriate events for output detection\n3. Store timestamps in PaneState\n4. Handle pane creation/deletion","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:16:36.34213891-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:16:36.34213891-05:00","dependencies":[{"issue_id":"zellij-crew-0x9","depends_on_id":"zellij-crew-5ci","type":"parent","created_at":"2026-01-22T10:37:37.095820356-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-0x9","depends_on_id":"zellij-crew-lq5","type":"blocks","created_at":"2026-01-22T16:23:37.036842439-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-1ic","title":"Create README.md with usage documentation","description":"Document plugin purpose, installation, configuration (actor_names parameter), default names list, build instructions, and usage examples","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:38.349096625-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:23:11.952633607-05:00","closed_at":"2026-01-19T16:23:11.952633607-05:00","close_reason":"Closed","labels":["docs"]}
{"id":"zellij-crew-4j0","title":"Study and document default tab-bar plugin structure","description":"Analyze zellij's default tab-bar plugin structure:\n\n1. main.rs: State, load(), update(), render() lifecycle\n2. tab.rs: Tab rendering, cursors(), render_tab()\n3. line.rs: Layout, overflow handling, tab_line()\n\nDocument key patterns:\n- LinePart struct for styled output\n- How multi-user indicators are rendered\n- Mouse click handling for tab selection\n- Color/palette integration","notes":"## Analysis of Zellij Default Tab-Bar Plugin\n\n### File Structure (3 files, ~620 lines total)\n- `main.rs` (164 lines): Plugin lifecycle, state management\n- `tab.rs` (141 lines): Individual tab rendering, multi-user indicators\n- `line.rs` (465 lines): Tab line layout, overflow handling, keybind display\n\n### Key Data Structures\n\n**LinePart** - Core rendering unit:\n```rust\npub struct LinePart {\n    part: String,       // ANSI-styled text\n    len: usize,         // Visual width (for layout)\n    tab_index: Option\u003cusize\u003e,  // For mouse click handling\n}\n```\n\n**State** - Plugin state:\n```rust\nstruct State {\n    tabs: Vec\u003cTabInfo\u003e,\n    active_tab_idx: usize,\n    mode_info: ModeInfo,           // Contains palette/colors\n    tab_line: Vec\u003cLinePart\u003e,       // Cached for mouse clicks\n    hide_swap_layout_indication: bool,\n}\n```\n\n### Plugin Lifecycle\n\n**load():**\n- Parse config from BTreeMap\u003cString, String\u003e\n- Call set_selectable(false) - tab bar not focusable\n- Subscribe to: TabUpdate, ModeUpdate, Mouse\n\n**update():**\n- ModeUpdate: Store mode_info (contains colors/palette)\n- TabUpdate: Store tabs, find active_tab_idx\n- Mouse: Handle LeftClick (tab switch), ScrollUp/Down (tab navigation)\n- Returns bool for should_render\n\n**render():**\n- Build LinePart for each tab via tab_style()\n- Call tab_line() to layout with overflow handling\n- Print with ANSI background fill\n\n### Multi-User Indicator Pattern (tab.rs:7-21, 59-82)\n\n```rust\nfn cursors(focused_clients: \u0026[ClientId], colors: MultiplayerColors) -\u003e (Vec\u003cANSIString\u003e, usize) {\n    for client_id in focused_clients {\n        if let Some(color) = client_id_to_colors(*client_id, colors) {\n            cursors.push(style!(color.1, color.0).paint(\" \"));  // Colored space\n        }\n    }\n}\n```\n\nRendered as: `tabname[‚ñ† ‚ñ†]` where each ‚ñ† is a colored space for each other user.\n\n### Tab Styling (tab.rs:23-89)\n\nKey points:\n- Uses `palette.ribbon_selected` / `ribbon_unselected` for colors\n- Appends \"(FULLSCREEN)\" or \"(SYNC)\" to tab name\n- Separator character: \"\" (powerline arrow) or empty\n- Tab text wrapped with separators: `‚îÇ tabname ‚îÇ`\n\n### Overflow Handling (line.rs:15-108)\n\nWhen tabs dont fit:\n- Shows active tab first\n- Adds tabs left/right alternately while they fit\n- Collapsed indicators: `‚Üê +N` and `+N ‚Üí`\n- Clicking collapsed indicator jumps to hidden tabs\n\n### Dependencies\n```toml\nansi_term = \"0.12\"      # ANSI styling\nunicode-width = \"0.1.8\" # Unicode char width calculation\nzellij-tile             # Plugin API\nzellij-tile-utils       # style!() macro\n```\n\n### Patterns to Adopt for zellij-crew\n\n1. **LinePart pattern** - Separate styled content from width tracking\n2. **tab_style() ‚Üí render_tab()** - Two-level abstraction\n3. **Mouse handling** - Store tab_line for click detection\n4. **Palette integration** - Use mode_info.style.colors\n5. **set_selectable(false)** - Tab bar shouldnt steal focus\n\n### Activity Indicator Integration Point\n\nIn `render_tab()` (tab.rs:59-82), after tab text, add our indicator:\n```rust\n// After existing multi-user cursor section\nif let Some(indicator) = get_activity_indicator(tab) {\n    s.push_str(\u0026indicator_styled);\n    tab_text_len += indicator_len;\n}\n```\n\n### What We Need to Add\n\n1. **TabState integration** - Track pane activity per tab\n2. **Indicator rendering** - Similar pattern to cursors()\n3. **Config for indicators** - Customizable symbols/colors\n4. **Pipe message handling** - New event subscription","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:05:07.182335038-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T20:23:43.435994352-05:00","closed_at":"2026-01-22T20:23:43.435994352-05:00","close_reason":"Analysis complete - documented plugin structure, key patterns, and integration points for activity indicators","dependencies":[{"issue_id":"zellij-crew-4j0","depends_on_id":"zellij-crew-aja","type":"parent","created_at":"2026-01-22T10:05:40.54003347-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-4jx","title":"Document and test Claude hook integration","description":"Create documentation and test Claude Code hook integration:\n\n1. Document .claude/settings.json hook configuration\n2. Create example hooks for PreToolUse, PostToolUse, Stop, Notification\n3. Test with actual Claude Code session\n4. Document shell integration (precmd/preexec) as optional\n5. Add troubleshooting section","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:06:06.17096409-05:00","created_by":"Karl Bunch","updated_at":"2026-02-13T18:25:16.494231465-05:00","closed_at":"2026-02-13T18:25:16.494231465-05:00","close_reason":"Hooks documented in README, integration works. Intermittent state update issue filed separately.","dependencies":[{"issue_id":"zellij-crew-4jx","depends_on_id":"zellij-crew-lq5","type":"parent","created_at":"2026-01-22T10:06:44.380997784-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-4jx","depends_on_id":"zellij-crew-9km","type":"blocks","created_at":"2026-01-22T10:06:46.161027361-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-4s8","title":"Create manual testing procedure document","description":"Document manual testing steps: load plugin in zellij, create/close tabs, verify name allocation, test configuration options, verify tab renaming behavior. Save as TESTING.md.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:30:27.179606019-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:23:11.953724486-05:00","closed_at":"2026-01-19T16:23:11.953724486-05:00","close_reason":"Closed"}
{"id":"zellij-crew-54d","title":"Add configurable indicator symbols","description":"Make all indicators configurable via KDL:\n\nindicator_idle \"‚óã\"\nindicator_running \"‚óê\"\nindicator_working \"‚óè\"\nindicator_question \"?\"\nindicator_sleeping \"üò¥\"\nindicator_done \"‚úì\"\nindicator_error \"!\"\n\nParse in Config, use in rendering.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:42:43.096836632-05:00","created_by":"Karl Bunch","updated_at":"2026-02-06T19:40:34.747947979-05:00","closed_at":"2026-02-06T03:01:21.412597582Z","dependencies":[{"issue_id":"zellij-crew-54d","depends_on_id":"zellij-crew-dvu","type":"parent","created_at":"2026-01-22T10:45:31.695709612-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-54d","depends_on_id":"zellij-crew-f6x","type":"blocks","created_at":"2026-01-22T16:23:37.644942254-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-54d","depends_on_id":"zellij-crew-5ci","type":"blocks","created_at":"2026-01-22T16:23:38.243469875-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-5ci","title":"Phase 2d: Timeout Detection (Sleeping State)","description":"Implement timeout-based sleeping detection for honest uncertainty.\n\nDeliverables:\n- Timer-based activity monitoring\n- Sleeping state when no output for N seconds\n- Configurable timeout (default 30s, 0 to disable)","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T09:06:41.52207293-05:00","created_by":"Karl Bunch","updated_at":"2026-01-27T08:34:30.940404076-05:00","closed_at":"2026-01-27T08:34:30.940404076-05:00","close_reason":"zellij 0.43.1 does not support detection of an idle pane","dependencies":[{"issue_id":"zellij-crew-5ci","depends_on_id":"zellij-crew-s00","type":"parent","created_at":"2026-01-22T10:04:16.818978162-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-5ci","depends_on_id":"zellij-crew-lq5","type":"blocks","created_at":"2026-01-22T10:04:47.275723016-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-5m1","title":"Create DESIGN.md architecture and behavior specification","description":"Create comprehensive DESIGN.md documenting: (1) Project purpose - auto-rename zellij tabs with allocated names from a pool (2) Name allocation strategy - how names are assigned/reused based on tab position (3) Configuration options - name pools, behavior settings (4) State management - what data to track (5) Event flow - TabUpdate handling and rename triggers (6) Reference existing zellij-tab-bar-indexed analysis from zellij-crew-z7t notes. This document is critical - implementation cannot proceed without clear design specification.","status":"closed","priority":0,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:49:01.349230064-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:00:51.040914852-05:00","closed_at":"2026-01-19T16:00:51.040914852-05:00","close_reason":"Closed"}
{"id":"zellij-crew-5qx","title":"Implement prompt regex matching","description":"Detect shell prompts from terminal content:\n\n1. Only check last N characters (configurable, default 500)\n2. Strip ANSI escape codes before matching\n3. Configurable prompt patterns with anchors (^/$)\n4. Default patterns: shell ($#%\u003e‚ùØ), Python (\u003e\u003e\u003e), etc.\n5. Update TabState with ContentMatch source when prompt detected","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:07:03.139122083-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:07:03.139122083-05:00","dependencies":[{"issue_id":"zellij-crew-5qx","depends_on_id":"zellij-crew-f6x","type":"parent","created_at":"2026-01-22T10:16:25.344478041-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-5qx","depends_on_id":"zellij-crew-om9","type":"blocks","created_at":"2026-01-22T10:16:26.567208734-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-6wr","title":"Fix crew-bar layout to prevent per-tab loading","description":"Update ~/.config/zellij/layouts/crew-bar.kdl to add explicit 'tab' node. This prevents zellij from treating the layout as default_tab_template which creates multiple crew instances per tab, causing race conditions in rename_tab().\n\n**Why**: Without explicit tab node, every new tab loads a new crew instance. All instances call rename_tab() simultaneously ‚Üí tab names flicker.\n\n**Fix**: Add 'tab' node after plugin definitions to make plugins load at session level (ONE instance).\n\n**Files**: ~/.config/zellij/layouts/crew-bar.kdl","status":"closed","priority":0,"issue_type":"bug","owner":"karlbunch@karlbunch.com","created_at":"2026-01-24T18:29:34.20561297-05:00","created_by":"Karl Bunch","updated_at":"2026-01-24T19:52:39.412738974-05:00","closed_at":"2026-01-24T19:52:39.412738974-05:00","close_reason":"Approach changed: discovered leader/renderer architecture. Per-tab loading is now desired for renderers; leader loaded via load_plugins. See DESIGN.md 'Leader/Renderer Architecture' section."}
{"id":"zellij-crew-747","title":"Verify fix: stable names with single instance","description":"Run full test suite from TESTING.md to verify the leader/renderer architecture works:\n\n**Critical Tests**:\n- T8 (modified): Verify single LEADER instance (is_leader=true shows once in logs)\n- T1-T3: Basic naming with round-robin and fill-in modes  \n- T2 modified: Close middle tab, verify names DON'T shift\n\n**Expected Behavior**:\n1. Logs show ONE is_leader=true instance, multiple is_leader=false renderers\n2. Tab names: alpha, bravo, charlie (assigned by leader)\n3. Close bravo ‚Üí alice and charlie keep their names (STABLE)\n4. New tab gets 'bravo' (fill-in) or 'delta' (round-robin)\n\n**Architecture**:\n- Leader (load_plugins): manages state, calls rename_tab()\n- Renderers (per-tab): receive state via pipe, render tab bar\n\n**Files**: All test cases in TESTING.md","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-24T18:30:20.268973999-05:00","created_by":"Karl Bunch","updated_at":"2026-01-28T07:02:47.849591353-05:00","closed_at":"2026-01-28T07:02:47.849591353-05:00","close_reason":"Superseded by updated TESTING.md. Architecture working, tests documented correctly now (T8 expects leader + renderers, not single instance).","dependencies":[{"issue_id":"zellij-crew-747","depends_on_id":"zellij-crew-6wr","type":"blocks","created_at":"2026-01-24T18:30:31.999033503-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-747","depends_on_id":"zellij-crew-l1v","type":"blocks","created_at":"2026-01-24T18:30:32.633946493-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-7j1","title":"Implement name allocation algorithm","description":"Create find_available_name() to find first unused name from names list. Create should_rename() to check if tab name starts with 'Tab #'. Handle fallback to 'Tab #N' format when all names exhausted","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:37.125506061-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:22:13.577097812-05:00","closed_at":"2026-01-19T16:22:13.577097812-05:00","close_reason":"Closed","labels":["core"],"dependencies":[{"issue_id":"zellij-crew-7j1","depends_on_id":"zellij-crew-5m1","type":"blocks","created_at":"2026-01-19T13:49:10.623948555-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-7ok","title":"Rename the target executable zellij-crew not zellij_crew","status":"closed","priority":3,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T20:30:09.029371689-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T20:39:21.539496853-05:00","closed_at":"2026-01-19T20:39:21.539496853-05:00","close_reason":"Cargo already builds as zellij-crew.wasm (hyphen), removed old zellij_crew.wasm from config"}
{"id":"zellij-crew-7pk","title":"Fix plugin exit/crash and fill-in mode bugs","description":"Two critical bugs identified during testing:\n\n1. **Plugin keeps exiting** - Log shows repeated 'Bye from plugin X' messages. Plugin loads then exits within seconds. Need to investigate why.\n\n2. **Fill-in mode not working** - When closing 'bob' and creating new tab, got 'Tab #5' instead of 'bob'. Root cause was using tab.position as key, but positions shift when tabs close. FIXED by switching to name-based tracking.\n\nSession context:\n- Switched from lib.rs to main.rs (needed _start export)\n- Added ChangeApplicationState permission for rename_tab\n- Removed set_selectable(false) call\n- Rewrote state tracking to use used_names HashSet instead of assigned_names by position\n\nTesting needed after restart:\n- Verify plugin stays running (no repeated 'Bye' messages)\n- Test fill-in: alice,bob,carol,dave -\u003e close bob -\u003e new tab should be 'bob'\n- Test round-robin: same scenario should give 'eve' not 'bob'","notes":"## Session 3 - Root Cause Found and Fixed\n\n### The Real Bug (Zellij API Mismatch)\nTraced through zellij source code in /home/karl/workspace-wsl/zellij:\n\n1. **Tab struct** (zellij-server/src/tab/mod.rs:220-222):\n   - `index: usize` - stable ID, never changes\n   - `position: usize` - visual order, shifts when tabs close\n\n2. **TabInfo sent to plugins** (zellij-server/src/screen.rs:2048-2049):\n   - Only exposes `position`, NOT `index`\n\n3. **rename_tab handler** (zellij-server/src/screen.rs:5993):\n   ```rust\n   screen.tabs.get_mut(\u0026tab_index.saturating_sub(1))\n   ```\n   - `tabs` is `BTreeMap\u003cusize, Tab\u003e` keyed by **index**\n   - So rename_tab expects `index + 1`, not position!\n\n4. **Default tab names** (zellij-server/src/tab/mod.rs:698):\n   ```rust\n   format!(\"Tab #{}\", index + 1)\n   ```\n   - The number in \"Tab #N\" IS `index + 1`\n\n### The Fix\nParse the number from \"Tab #N\" instead of using position:\n\n```rust\nlet tab_index = match tab.name.strip_prefix(\"Tab #\").and_then(|s| s.parse::\u003cu32\u003e().ok()) {\n    Some(n) =\u003e n,  // Use the number from \"Tab #N\"\n    None =\u003e {\n        eprintln!(\"zellij-crew: can't rename '{}' - no stable index\", tab.name);\n        continue;\n    }\n};\n```\n\n### Example\n- Tabs: Tab #1 (idx=0), Tab #2 (idx=1), Tab #3 (idx=2), Tab #4 (idx=3)\n- Close Tab #2\n- Remaining: Tab #1 (pos=0), Tab #3 (pos=1), Tab #4 (pos=2)\n- Old code: rename_tab(pos+1=3) ‚Üí renamed index 2 (Tab #3) WRONG\n- Fixed: parse \"4\" from \"Tab #4\", rename_tab(4) ‚Üí renamed index 3 CORRECT\n\n### Status\n- Fix implemented and tested (cargo build, cargo test pass)\n- Ready for manual testing in live zellij session","status":"closed","priority":0,"issue_type":"bug","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T19:05:45.462298439-05:00","created_by":"Karl Bunch","updated_at":"2026-01-25T15:12:45.640689555-05:00","closed_at":"2026-01-25T15:12:45.640689555-05:00","close_reason":"Closed","comments":[{"id":1,"issue_id":"zellij-crew-7pk","author":"Karl Bunch","text":"Fixed the rename_tab position mismatch bug.\n\nRoot cause: Zellij API mismatch - TabInfo only exposes `position` (which shifts when tabs close) but rename_tab() expects the stable `index`. Traced through zellij source to confirm:\n- screen.tabs is BTreeMap\u003cusize, Tab\u003e keyed by index\n- rename_tab handler does tabs.get_mut(\u0026(tab_index - 1))\n- But TabInfo sent to plugins only has position, not index\n\nFix: Parse the number from \"Tab #N\" (which is index+1) instead of using position+1. This works because default tab names encode the stable index.\n\nTested and working.","created_at":"2026-01-20T02:01:06Z"},{"id":2,"issue_id":"zellij-crew-7pk","author":"Karl Bunch","text":"Status check with new architecture:\n\n**Bug 1: Plugin keeps exiting**\n- Original issue: 'Bye from plugin X' messages, plugin exits within seconds\n- Current status: NOT seeing this with leader/renderer architecture\n- Need to verify: check for 'Bye from plugin' in recent logs\n\n**Bug 2: Fill-in mode not working**\n- Original issue: Close bob, new tab got 'Tab #5' instead of reusing 'bob'\n- Root cause: tracked by position (shifts) not stable identifier\n- FIX: Now tracking by stable tab_id in HashMap\u003cu32, CrewTabState\u003e\n- Fill-in checks user_defined flag, only reuses pool names\n- TESTED: Close/reopen cycles work correctly, names reuse as expected\n\n**Rename API bug:**\n- Already fixed: parse tab_id from 'Tab #N' for rename_tab() call\n- Notes show this was solved in session 3, confirmed working now\n\n**Recommendation:**\n- Check logs for any 'Bye from plugin' or crash messages\n- If none found, close this bead as resolved by architecture changes","created_at":"2026-01-25T20:11:26Z"},{"id":3,"issue_id":"zellij-crew-7pk","author":"Karl Bunch","text":"Both bugs RESOLVED:\n\n**Bug 1: Plugin keeps exiting**\n- Original: Plugin exits within seconds of loading\n- Current: 'Bye from plugin X' only occurs on tab close (expected)\n- Renderer instances exit when tabs close (normal in leader/renderer arch)\n- Leader (id=0 or 1) stays running throughout session\n- No crashes or unexpected exits observed\n\n**Bug 2: Fill-in mode not working**  \n- Original: Close bob, new tab got 'Tab #5' instead of reusing 'bob'\n- FIX: Now using stable tab_id (from 'Tab #N') instead of position\n- HashMap\u003cu32, CrewTabState\u003e keyed by tab_id\n- Fill-in checks !user_defined, reuses pool names correctly\n- TESTED: Close/reopen cycles work, names reuse as expected\n\n**Verification from logs:**\n- Bye messages correlate with tab closes (not spontaneous exits)\n- Tab names recycling: 'Bob' closed, returns to pool, reused\n- No more position tracking bugs\n\nBoth issues resolved by leader/renderer architecture and stable tab_id tracking.","created_at":"2026-01-25T20:12:28Z"}]}
{"id":"zellij-crew-91s","title":"Run cargo test and verify WASM build","description":"Run cargo test to execute unit tests. Verify WASM compilation with cargo build --release --target wasm32-wasip1. Ensure no compilation errors or test failures.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:30:28.606721681-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:31:21.472108388-05:00","closed_at":"2026-01-19T16:31:21.472108388-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-91s","depends_on_id":"zellij-crew-c5k","type":"blocks","created_at":"2026-01-19T13:30:40.97597335-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-91s","depends_on_id":"zellij-crew-0ao","type":"blocks","created_at":"2026-01-19T13:30:41.587477356-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-932","title":"Implement tab renaming with position tracking","description":"Call rename_tab((tab.position + 1) as u32, new_name) for new tabs. Track renamed positions to prevent re-renaming. Clean up renamed_positions for closed tabs","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:37.733268155-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:22:13.57805664-05:00","closed_at":"2026-01-19T16:22:13.57805664-05:00","close_reason":"Closed","labels":["core"],"dependencies":[{"issue_id":"zellij-crew-932","depends_on_id":"zellij-crew-5m1","type":"blocks","created_at":"2026-01-19T13:49:11.230364745-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-9km","title":"Render activity indicators from TabState","description":"Update tab rendering to show activity indicators:\n\n1. Look up PaneState for each tab's focused pane\n2. Render indicator based on status (idle: ‚óã, running: ‚óê, working: ‚óè, question: ?, sleeping: üò¥)\n3. Position indicator after tab name\n4. Handle indicator colors from palette","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:06:04.388474097-05:00","created_by":"Karl Bunch","updated_at":"2026-01-25T15:12:45.642651457-05:00","closed_at":"2026-01-25T15:12:45.642651457-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-9km","depends_on_id":"zellij-crew-lq5","type":"parent","created_at":"2026-01-22T10:06:43.786966262-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-9km","depends_on_id":"zellij-crew-bgb","type":"blocks","created_at":"2026-01-22T10:06:45.569328224-05:00","created_by":"Karl Bunch"}],"comments":[{"id":4,"issue_id":"zellij-crew-9km","author":"Karl Bunch","text":"IMPLEMENTED - Activity indicators rendering correctly.\n\n**Current implementation:**\n- Renderers receive CrewTabState from leader via pipe\n- src/main.rs:481-509 - render logic matches ActivityStatus to indicator\n- Indicators: ‚óå (Unknown), ‚óã (Idle), ‚óè (Working), ? (Question)\n- Format: 'TabName [indicator]' (e.g., 'Alice [‚óè]')\n\n**Tested and working:**\n- External pipe updates: zellij pipe --name zellij-crew:status --args 'pane=ID,state=STATUS'\n- Pane-to-tab mapping via PaneManifest\n- Per-tab status updates (not all tabs)\n- Indicators display correctly in tab bar\n\n**What's implemented vs spec:**\n- Spec mentioned per-pane indicators, we do per-tab (simpler, sufficient)\n- Palette colors not yet used (just plain ASCII indicators)\n- Subset of states (4 vs 7 in original spec)\n\nReady for next phase: palette integration, more states, etc.","created_at":"2026-01-25T20:10:45Z"}]}
{"id":"zellij-crew-aja","title":"Phase 2a: Tab-Bar Foundation","description":"Fork default tab-bar plugin structure and integrate existing naming logic.\n\nDeliverables:\n- New plugin that renders a functional tab bar\n- Existing name allocation logic integrated\n- Basic state management","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T09:06:35.450590127-05:00","created_by":"Karl Bunch","updated_at":"2026-01-24T05:32:56.969236623-05:00","closed_at":"2026-01-24T05:32:56.969236623-05:00","close_reason":"Phase 2a complete - tab-bar foundation with name allocation","dependencies":[{"issue_id":"zellij-crew-aja","depends_on_id":"zellij-crew-s00","type":"parent","created_at":"2026-01-22T10:04:15.004862113-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-be7","title":"Replace dual-mode architecture with pure tab-bar leader election","description":"Eliminate load_plugins requirement. All instances are tab-bar panes with timer-based leader election. Includes Makefile for build/install/reload workflow.","status":"closed","priority":1,"issue_type":"feature","owner":"karlbunch@karlbunch.com","created_at":"2026-02-13T08:02:05.007128788-05:00","created_by":"Karl Bunch","updated_at":"2026-02-13T08:02:56.088224466-05:00","closed_at":"2026-02-13T08:02:56.088224466-05:00","close_reason":"Already implemented in commit e171e41"}
{"id":"zellij-crew-bgb","title":"Subscribe to pipe messages and parse protocol","description":"Handle incoming pipe messages:\n\n1. Subscribe to appropriate event for pipe messages\n2. Parse messages matching 'zellij-crew:status' namespace\n3. Extract pane_id and state from args: 'pane=ID,state=STATE'\n4. Supported states: idle, running, working, thinking, tool:NAME, waiting, question, done, error\n5. Update TabState with Pipe source (highest priority)","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:06:02.633108021-05:00","created_by":"Karl Bunch","updated_at":"2026-01-25T13:59:03.388608805-05:00","closed_at":"2026-01-25T13:59:03.388608805-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-bgb","depends_on_id":"zellij-crew-lq5","type":"parent","created_at":"2026-01-22T10:06:43.185422444-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-bgb","depends_on_id":"zellij-crew-ebx","type":"blocks","created_at":"2026-01-22T10:06:44.978180239-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-bgb","depends_on_id":"zellij-crew-e5f","type":"blocks","created_at":"2026-01-24T19:53:24.277531222-05:00","created_by":"Karl Bunch"}],"comments":[{"id":5,"issue_id":"zellij-crew-bgb","author":"Karl Bunch","text":"External pipe messaging WORKING:\n\n**Implementation:**\n- Subscribe to PaneUpdate events to get pane-to-tab mapping\n- Store PaneManifest in leader state\n- Parse zellij pipe --name zellij-crew:status --args 'pane=ID,state=STATUS'\n- Map pane_id to tab position via PaneManifest\n- Map tab position to tab_id via leader_tabs\n- Update specific CrewTabState.status\n- Broadcast to renderers\n\n**Supported states:**\n- idle ‚Üí ActivityStatus::Idle (‚óã)\n- working ‚Üí ActivityStatus::Working (‚óè)\n- question ‚Üí ActivityStatus::Question (?)\n\n**Tested:**\n- Individual pane updates work correctly\n- Pane IDs map to correct tabs\n- Close/reopen cycles work (fill-in reuses names with new pane IDs)\n- Multiple rapid updates handled correctly\n\n**Code locations:**\n- src/main.rs:317 - handle_external_status_update()\n- src/main.rs:343 - update_pane_status() with pane-to-tab mapping\n- Filters terminal panes only (!p.is_plugin)\n\n**Future:** Name-based routing for inter-tab messages (JSON format with 'to' field)","created_at":"2026-01-25T18:57:36Z"}]}
{"id":"zellij-crew-bk0","title":"Integrate existing naming logic into tab-bar","description":"Merge the existing name allocation code into the new tab-bar plugin:\n\n1. Move Config struct and parsing\n2. Move name allocation (round-robin, fill-in)\n3. Move used_names tracking\n4. Remove rename_tab() calls - names are now rendered directly\n5. Ensure backward-compatible config (names, mode, show_position)","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:05:10.731942222-05:00","created_by":"Karl Bunch","updated_at":"2026-01-24T05:32:55.678564852-05:00","closed_at":"2026-01-24T05:32:55.678564852-05:00","close_reason":"Removed rename_tab(), names now rendered directly via assigned_names HashMap","dependencies":[{"issue_id":"zellij-crew-bk0","depends_on_id":"zellij-crew-aja","type":"parent","created_at":"2026-01-22T10:05:41.757329316-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-bk0","depends_on_id":"zellij-crew-q02","type":"blocks","created_at":"2026-01-22T10:05:43.548763041-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-c5k","title":"Write unit tests for name allocation algorithm","description":"Create unit tests for the name allocation logic. Follow pattern from zellij default plugins using #[cfg(test)] modules. Test: allocate names from pool, handle pool exhaustion, position-based allocation, name reuse when tabs close.","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T13:30:24.345344286-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:30:47.681929736-05:00","closed_at":"2026-01-19T16:30:47.681929736-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-c5k","depends_on_id":"zellij-crew-7j1","type":"blocks","created_at":"2026-01-19T13:30:38.383545564-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-cy9","title":"Create Cargo.toml with dependencies","description":"Create Cargo.toml file with zellij-tile 0.43.0 dependency, following the pattern from zellij-tab-bar-indexed","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:34.013899621-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:10:51.689792542-05:00","closed_at":"2026-01-19T16:10:51.689792542-05:00","close_reason":"Closed","labels":["setup"]}
{"id":"zellij-crew-dvf","title":"Fix user-renamed tab tracking","description":"When users manually rename tabs, the plugin loses tracking because it can't extract tab_id from non-default names.\n\nRoot cause: src/main.rs:308-309 ignores user-defined names.\n\nSolution: Track both tab_id AND position for all tabs. Match tabs by name first, then position, to handle both renames and reorders. Keep tracking user-renamed tabs for status updates.\n\nEvidence from logs: Tab 'dev update' (Tab #3) is being ignored, causing it to disappear from status list.","status":"closed","priority":1,"issue_type":"bug","owner":"karlbunch@karlbunch.com","created_at":"2026-01-29T06:45:44.157654236-05:00","created_by":"Karl Bunch","updated_at":"2026-02-13T18:23:51.009968277-05:00","closed_at":"2026-02-13T18:23:51.009968277-05:00","close_reason":"Verified: renamed tabs persist through tab open/close cycles"}
{"id":"zellij-crew-dvu","title":"Phase 2e: Polish and Configuration","description":"Final polish, configuration options, and performance tuning.\n\nDeliverables:\n- Configurable indicators (customizable symbols)\n- Color theming integration\n- Performance optimization\n- Documentation updates","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T09:06:43.243912092-05:00","created_by":"Karl Bunch","updated_at":"2026-01-28T07:05:03.238131403-05:00","closed_at":"2026-01-28T07:05:03.238131403-05:00","close_reason":"Container issue no longer needed. Individual enhancements (configurable indicators, color theming, performance) tracked separately. Documentation complete.","dependencies":[{"issue_id":"zellij-crew-dvu","depends_on_id":"zellij-crew-s00","type":"parent","created_at":"2026-01-22T10:04:17.426701648-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-dvu","depends_on_id":"zellij-crew-f6x","type":"blocks","created_at":"2026-01-22T10:04:47.876261965-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-dvu","depends_on_id":"zellij-crew-5ci","type":"blocks","created_at":"2026-01-22T10:04:48.467366336-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-e5f","title":"Implement leader/renderer pipe communication","description":"Implement pipe-based state broadcast from leader to renderers.\n\n**Leader responsibilities:**\n- Detect leader mode (rows \u003e 1 on first render)\n- Maintain LeaderState with HashMap\u003cString, TabState\u003e\n- On TabUpdate: parse 'Tab #N' for new tabs, assign names, track user renames\n- On tab close: return pool names (!user_defined), discard user names\n- Broadcast full TabState list to renderers on any change\n\n**Renderer responsibilities:**\n- Detect renderer mode (rows ‚â§ 1 on first render)\n- Subscribe to crew-state pipe\n- On receive: replace local tab list, trigger render\n- render(): iterate TabState list, show 'Name [indicator]' for each\n\n**Pipe protocol:**\n- Name: crew-state\n- Payload: JSON array of TabState {name, user_defined, status, ...}\n\n**Key insight:** Renderers are completely stateless. They don't track tabs, don't call rename_tab(), just paint what leader sends.\n\n**Reference:**\n- DESIGN.md 'Leader/Renderer Architecture' section\n- DESIGN.md 'TabState: The Truth Store' section","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-24T19:53:07.696683788-05:00","created_by":"Karl Bunch","updated_at":"2026-01-25T12:47:31.983133125-05:00","closed_at":"2026-01-25T12:47:31.983133125-05:00","close_reason":"Closed","comments":[{"id":6,"issue_id":"zellij-crew-e5f","author":"Karl Bunch","text":"Leader implementation complete:\n- Detection working (rows \u003e 1 on first render)\n- CrewTabState: tab_id keyed HashMap, with pending_rename flag\n- Rename logic: parse Tab #N for tab_id, send rename, track pending, confirm on TabUpdate\n- No more rename loops - pending_rename prevents re-renaming\n- Pool name allocation working (fill-in mode)\n- Tab close detection and name recycling working\n\n**Logs show clean behavior:**\n- 'Renaming Tab #1 -\u003e Alice'\n- 'Tab #1 still pending rename' (while waiting)\n- 'Rename confirmed: Tab #1 -\u003e Alice'\n\n**Still TODO:**\n- Pipe broadcast from leader to renderers\n- Renderer subscribe to pipe and update local state\n- Renderer display from received state (not TabUpdate)","created_at":"2026-01-25T14:44:22Z"},{"id":7,"issue_id":"zellij-crew-e5f","author":"Karl Bunch","text":"Pipe broadcast implemented:\n- Added serde/serde_json dependencies\n- CrewTabState now Serialize/Deserialize (skip pending_rename)\n- Leader broadcast_state(): serializes Vec\u003cCrewTabState\u003e, sends via pipe_message_to_plugin\n- Renderers subscribe to CustomMessage events\n- Renderers parse 'crew-state' messages, update received_tabs\n- Render now matches tabs by tab_id, displays leader's names with status indicators\n\n**Ready to test:**\n- Should see '[crew:leader] Broadcasting state: N tabs' in logs\n- Should see '[crew:renderer] Received state: N tabs' in logs\n- Tab names should update from leader state, not just TabUpdate","created_at":"2026-01-25T15:30:00Z"},{"id":8,"issue_id":"zellij-crew-e5f","author":"Karl Bunch","text":"Pipe communication WORKING:\n\n**Key discoveries:**\n- pipe() method (not CustomMessage events) - implement fn pipe(\u0026mut self, PipeMessage) on ZellijPlugin trait\n- pipe_message_to_plugin() with with_plugin_url('crew') broadcasts to ALL instances with that URL\n- MessageAndLaunchOtherPlugins permission required\n- Source in pipe_message is Plugin(leader_id) \n\n**Implementation:**\n- Leader broadcasts via pipe_message_to_plugin(MessageToPlugin::new('crew-state').with_plugin_url('crew').with_payload(json))\n- All renderers receive in pipe() method, parse JSON, update received_tabs\n- Tested with 4 tabs, all renderers receive synchronized state\n\n**Logs confirm:**\n- [crew:leader] Broadcasting state: N tabs\n- [crew:renderer] Received state via pipe: N tabs (on all renderer IDs)\n- State count changes dynamically (1‚Üí2‚Üí4‚Üí3‚Üí2‚Üí1) as tabs open/close\n\n**Remaining work:**\n- Remove CustomMessage event handling (not needed)\n- Clean up debug logging\n- Renderer should display from received_tabs (currently still using TabUpdate)","created_at":"2026-01-25T17:19:35Z"},{"id":9,"issue_id":"zellij-crew-e5f","author":"Karl Bunch","text":"Cleanup complete:\n- Removed CustomMessage event handling (not needed)\n- pipe() method is the correct mechanism\n- All debug logging preserved for ongoing work\n\n**Current state:**\n- Leader/renderer architecture fully functional\n- Leader broadcasts CrewTabState via crew-state pipe\n- All renderers receive and display synchronized state\n- Tab names, activity indicators (‚óå‚óè‚óã?) working\n- Ready for next phase: external activity signals","created_at":"2026-01-25T17:31:36Z"},{"id":10,"issue_id":"zellij-crew-e5f","author":"Karl Bunch","text":"COMPLETE - Pipe communication fully implemented and tested.\n\n**Final implementation:**\n- Leader broadcasts via pipe_message_to_plugin with with_plugin_url('crew')\n- Renderers receive in pipe() method (ZellijPlugin trait)\n- JSON serialization of Vec\u003cCrewTabState\u003e working\n- All renderers stay synchronized\n\n**Verified working:**\n- Leader renames tabs (Tab #1 -\u003e Alice)\n- Leader broadcasts state after each TabUpdate\n- All renderer instances receive and parse state\n- Renderers display leader's names with status indicators\n- Tested with 4 tabs, create/close cycles, all working\n\n**Code locations:**\n- src/main.rs:165 - broadcast_state() method\n- src/main.rs:441 - pipe() method for receiving\n- src/main.rs:481 - renderer display logic using received_tabs\n\n**Commits:**\n- 6f0ad17: Implement working leader-to-renderer pipe communication\n- 3b1df9a: Remove unused CustomMessage event handling\n\nReady for next phase: external activity signals (zellij-crew:status pipe)","created_at":"2026-01-25T17:47:17Z"}]}
{"id":"zellij-crew-ebx","title":"Implement TabState struct","description":"Create TabState as the central state manager (LEADER ONLY):\n\n**LeaderState:**\n- tabs: HashMap\u003cString, TabState\u003e (keyed by tab name)\n- name_pool: Vec\u003cString\u003e (configured names)\n- last_assigned_idx: usize (for round-robin)\n\n**TabState:**\n- name: String\n- user_defined: bool (true = user named it, false = from pool)\n- status: ActivityStatus\n- source: SignalSource\n- last_activity: Instant\n\n**ActivityStatus enum:** Unknown, Idle, Running, Working, Waiting, Question, Sleeping\n\n**SignalSource enum:** Pipe, ContentMatch, Timeout, None\n\n**Key methods:**\n- on_tab_update() - handle TabUpdate, assign names, track tabs\n- on_tab_closed() - return pool names, discard user names\n- on_pipe_message() - update activity status\n- broadcast_state() - send to renderers\n\n**Note:** Renderers are stateless - they receive TabState from leader and render.","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:06:00.813940509-05:00","created_by":"Karl Bunch","updated_at":"2026-01-25T13:58:46.882752935-05:00","closed_at":"2026-01-25T13:58:46.882752935-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-ebx","depends_on_id":"zellij-crew-lq5","type":"parent","created_at":"2026-01-22T10:06:42.57764943-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-ebx","depends_on_id":"zellij-crew-aja","type":"blocks","created_at":"2026-01-22T16:23:35.789224169-05:00","created_by":"Karl Bunch"}],"comments":[{"id":11,"issue_id":"zellij-crew-ebx","author":"Karl Bunch","text":"IMPLEMENTED as CrewTabState:\n\n**What we built:**\n- CrewTabState struct with tab_id, name, pending_rename, user_defined, status\n- Keyed by stable tab_id (not name) in HashMap\u003cu32, CrewTabState\u003e\n- ActivityStatus enum: Unknown, Idle, Working, Question (simplified from original spec)\n- No SignalSource or last_activity yet (future phase)\n\n**Key methods implemented:**\n- handle_leader_tab_update() - processes TabUpdate, assigns names, tracks tabs\n- Tab close handling - returns pool names, discards user names\n- handle_external_status_update() - processes zellij-crew:status pipes\n- update_pane_status() - maps pane_id to tab, updates status\n- broadcast_state() - sends to all renderers via crew-state pipe\n\n**Differences from spec:**\n- Named CrewTabState (not TabState) to distinguish from zellij's TabInfo\n- No SignalSource tracking yet (all updates via pipe currently)\n- No last_activity timestamps yet (for future timeout detection)\n- Simplified ActivityStatus (4 states vs 7 in spec)\n\nAll core functionality working and tested.","created_at":"2026-01-25T18:58:30Z"}]}
{"id":"zellij-crew-ecv","title":"Update README and documentation","description":"Update all documentation for Phase 2:\n\n1. README.md: new features, configuration options\n2. DESIGN.md: mark Phase 2 sections as implemented\n3. Add HOOKS.md: Claude hook setup guide\n4. Update TESTING.md with new test scenarios\n5. Add troubleshooting section","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:43:08.005761443-05:00","created_by":"Karl Bunch","updated_at":"2026-01-28T07:03:33.383729582-05:00","closed_at":"2026-01-28T07:03:33.383729582-05:00","close_reason":"Documentation overhaul complete: README.md, DESIGN.md, TESTING.md updated. HOOKS.md and PROTOCOL.md created. All documentation now accurate and aligned with code.","dependencies":[{"issue_id":"zellij-crew-ecv","depends_on_id":"zellij-crew-dvu","type":"parent","created_at":"2026-01-22T10:45:33.659918739-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-edj","title":"Create .gitignore file","description":"Add standard Rust .gitignore entries: /target/, and .beads/ for beads database","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:35.276099386-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:10:51.6932842-05:00","closed_at":"2026-01-19T16:10:51.6932842-05:00","close_reason":"Closed","labels":["setup"]}
{"id":"zellij-crew-f5l","title":"Performance optimization and testing","description":"Optimize and stress-test the plugin:\n\n1. Profile with many tabs (20+)\n2. Test with high-output commands (yes, cat large file)\n3. Measure memory usage\n4. Optimize hot paths\n5. Add performance notes to docs","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:43:00.122222507-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:43:00.122222507-05:00","dependencies":[{"issue_id":"zellij-crew-f5l","depends_on_id":"zellij-crew-dvu","type":"parent","created_at":"2026-01-22T10:45:33.001617616-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-f5l","depends_on_id":"zellij-crew-hsy","type":"blocks","created_at":"2026-01-22T10:45:34.948273001-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-f6x","title":"Phase 2c: Content Analysis (Fallback Detection)","description":"Implement terminal content analysis as fallback when no explicit signals.\n\nDeliverables:\n- PaneContents permission and retrieval\n- Debounced analysis (not on every output)\n- Prompt regex matching with performance safeguards\n- ANSI escape code stripping","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T09:06:39.754433466-05:00","created_by":"Karl Bunch","updated_at":"2026-01-27T08:33:27.85201707-05:00","closed_at":"2026-01-27T08:33:27.85201707-05:00","close_reason":"zellij 0.43.1 does not support detection of an idle pane","dependencies":[{"issue_id":"zellij-crew-f6x","depends_on_id":"zellij-crew-s00","type":"parent","created_at":"2026-01-22T10:04:16.213522961-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-f6x","depends_on_id":"zellij-crew-lq5","type":"blocks","created_at":"2026-01-22T10:04:46.669769215-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-fo1","title":"Implement TabUpdate event handling and new tab detection","description":"Implement update() method to handle Event::TabUpdate. Detect new tabs by comparing previous_tabs positions with current_tabs. Only process tabs that don't exist in previous state","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:36.505401161-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:22:13.576140737-05:00","closed_at":"2026-01-19T16:22:13.576140737-05:00","close_reason":"Closed","labels":["core"],"dependencies":[{"issue_id":"zellij-crew-fo1","depends_on_id":"zellij-crew-5m1","type":"blocks","created_at":"2026-01-19T13:49:10.002096375-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-fxi","title":"Implement sleeping state detection","description":"Detect and display sleeping state:\n\n1. Set up periodic timer (every 5 seconds)\n2. Check each pane: if status==Unknown AND elapsed \u003e sleep_timeout ‚Üí Sleeping\n3. Render üò¥ indicator for sleeping panes\n4. Clear sleeping state on any activity\n5. Configuration: sleep_timeout_secs (default 30, 0 to disable)","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:16:38.166191338-05:00","created_by":"Karl Bunch","updated_at":"2026-01-28T07:04:19.381258186-05:00","dependencies":[{"issue_id":"zellij-crew-fxi","depends_on_id":"zellij-crew-5ci","type":"parent","created_at":"2026-01-22T10:37:37.724198175-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-fxi","depends_on_id":"zellij-crew-0x9","type":"blocks","created_at":"2026-01-22T10:37:38.341860001-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-h9a","title":"Request ReadPaneContents permission and get content","description":"Set up pane content access:\n\n1. Add PermissionType::ReadPaneContents to permission request\n2. Use get_pane_scrollback(pane_id, false) to get viewport\n3. Track which panes need analysis (those without pipe signals)\n4. Only fetch content when analysis is needed","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:06:59.465585505-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:06:59.465585505-05:00","dependencies":[{"issue_id":"zellij-crew-h9a","depends_on_id":"zellij-crew-f6x","type":"parent","created_at":"2026-01-22T10:16:24.116866121-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-h9a","depends_on_id":"zellij-crew-lq5","type":"blocks","created_at":"2026-01-22T16:23:36.414630767-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-hsy","title":"Integrate color theming from palette","description":"Use Zellij's palette for indicator colors:\n\n1. Get colors from ModeInfo.style.colors\n2. Map states to appropriate palette colors\n3. Support both default and custom themes\n4. Handle 16-color vs 256-color terminals","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:42:52.835570917-05:00","created_by":"Karl Bunch","updated_at":"2026-01-28T07:13:59.60797474-05:00","closed_at":"2026-01-28T07:13:59.60797474-05:00","close_reason":"Not needed - emoji indicators provide sufficient visual distinction without ANSI coloring. Feature was brainstormed but never requested.","dependencies":[{"issue_id":"zellij-crew-hsy","depends_on_id":"zellij-crew-dvu","type":"parent","created_at":"2026-01-22T10:45:32.354900391-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-jza","title":"Manual test: tab-bar renders with names and placeholder indicators","description":"Test procedure:\n1. Run: zellij --layout crew-bar\n2. Verify tab-bar shows our plugin (not default zellij:tab-bar)\n3. Verify tabs display allocated names (Alice, Bob, etc.)\n4. Verify placeholder indicators [‚óã] appear\n5. Verify mouse click switches tabs\n6. Create new tab - verify it gets next name\n7. Close tab - verify name recycling (fill-in mode)\n\nPass criteria: All above work, no errors in zellij.log from our plugin","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-24T05:11:32.812891565-05:00","created_by":"Karl Bunch","updated_at":"2026-01-28T06:55:49.497586833-05:00","closed_at":"2026-01-28T06:55:49.497586833-05:00","close_reason":"user confirmed","dependencies":[{"issue_id":"zellij-crew-jza","depends_on_id":"zellij-crew-s34","type":"blocks","created_at":"2026-01-24T05:11:50.372695849-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-jza","depends_on_id":"zellij-crew-wet","type":"blocks","created_at":"2026-01-24T11:40:17.897953488-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-jza","depends_on_id":"zellij-crew-r3p","type":"blocks","created_at":"2026-01-24T11:50:00.251923186-05:00","created_by":"Karl Bunch"}],"comments":[{"id":12,"issue_id":"zellij-crew-jza","author":"Karl Bunch","text":"STATUS: Plugin loads but shows permission dialog in tab-bar pane. Since set_selectable(false), user cannot interact to grant permissions. NEXT: Need to pre-grant permissions in layout KDL. Try adding _allow_exec_host_cmd true or check zellij docs for permission grant syntax in plugin config. Layout is at ~/.config/zellij/layouts/crew-bar.kdl. Code is committed on main, needs git push (SSH issue).","created_at":"2026-01-24T10:49:43Z"},{"id":13,"issue_id":"zellij-crew-jza","author":"Karl Bunch","text":"FIX APPLIED: Moved set_selectable(false) from load() to PermissionRequestResult::Granted handler. Plugin now stays selectable until permission is granted, allowing user to focus pane and approve. Built and copied to ~/.config/zellij/zellij-crew.wasm. Ready for manual testing.","created_at":"2026-01-24T11:38:32Z"},{"id":14,"issue_id":"zellij-crew-jza","author":"Karl Bunch","text":"Phase 2b complete. Plugin now uses reference tab-bar rendering (proper ANSI styling with powerline arrows). Permission flow fixed. Known issue: first-run requires blindly clicking top of screen and pressing 'y' due to size=1 pane not showing permission dialog. Resize APIs don't seem to work against layout constraints. For first-time setup, temporarily use size=2 in layout, grant permission, then change back to size=1.","created_at":"2026-01-24T16:35:58Z"}]}
{"id":"zellij-crew-k6s","title":"Implement State struct and configuration parsing","description":"Create State struct with fields: names (Vec\u003cString\u003e), previous_tabs (Vec\u003cTabInfo\u003e), renamed_positions (HashSet\u003cusize\u003e). Implement load() to parse actor_names config with DEFAULT_NAMES fallback. Request permissions and subscribe to TabUpdate events","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:35.882793325-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:22:13.574894553-05:00","closed_at":"2026-01-19T16:22:13.574894553-05:00","close_reason":"Closed","labels":["core"],"dependencies":[{"issue_id":"zellij-crew-k6s","depends_on_id":"zellij-crew-5m1","type":"blocks","created_at":"2026-01-19T13:49:09.378259841-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-l1v","title":"Fix rename_tab 1-indexed API bug and track by tab.name","description":"Fix rename_tab API bug and implement proper name tracking.\n\n**Bug**: rename_tab() needs the tab ID, but TabInfo doesn't expose it directly.\n\n**Solution**: Parse tab ID from default name pattern 'Tab #N':\n```rust\nfn parse_default_name(name: \u0026str) -\u003e Option\u003cu32\u003e {\n    // \"Tab #5\" ‚Üí Some(5) (the tab_id for rename_tab)\n    if name.starts_with(\"Tab #\") {\n        name[5..].parse().ok()\n    } else {\n        None\n    }\n}\n\n// Then call:\nrename_tab(tab_id, new_name)\n```\n\n**Name tracking**: Now handled by LeaderState.tabs: HashMap\u003cString, TabState\u003e\n- Key is tab name (stable)\n- TabState includes user_defined flag\n- No position tracking needed\n\n**Note**: Only leader calls rename_tab(). Renderers never rename.\n\n**Files**: src/main.rs","status":"closed","priority":1,"issue_type":"bug","owner":"karlbunch@karlbunch.com","created_at":"2026-01-24T18:30:03.947246643-05:00","created_by":"Karl Bunch","updated_at":"2026-01-28T07:01:55.695417365-05:00","closed_at":"2026-01-28T07:01:55.695417365-05:00","close_reason":"Implemented - parse_default_name() exists, HashMap\u003cu32, CrewTabState\u003e tracking implemented, leader-only rename working","dependencies":[{"issue_id":"zellij-crew-l1v","depends_on_id":"zellij-crew-ycs","type":"blocks","created_at":"2026-01-24T18:30:31.369011175-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-lq5","title":"Phase 2b: Pipe Integration and TabState","description":"Implement TabState as single source of truth and pipe message handling.\n\nDeliverables:\n- TabState struct tracking per-pane activity\n- Pipe protocol parsing (zellij-crew:status)\n- Indicators update from pipe signals\n- Claude hook integration documented/tested","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T09:06:37.251173787-05:00","created_by":"Karl Bunch","updated_at":"2026-01-27T08:29:33.537474042-05:00","closed_at":"2026-01-27T08:29:33.537474042-05:00","close_reason":"Closed","dependencies":[{"issue_id":"zellij-crew-lq5","depends_on_id":"zellij-crew-s00","type":"parent","created_at":"2026-01-22T10:04:15.605148722-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-lq5","depends_on_id":"zellij-crew-aja","type":"blocks","created_at":"2026-01-22T10:04:46.078336011-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-om9","title":"Implement debounced content analysis","description":"Add performance safeguards for content analysis:\n\n1. Only analyze after output stops (configurable delay, default 200ms)\n2. Use timer events for debouncing\n3. Skip analysis if pane has recent pipe signal\n4. Rate limit: max one analysis per pane per second\n5. Track last_analyzed timestamp per pane","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:07:01.30664917-05:00","created_by":"Karl Bunch","updated_at":"2026-01-22T10:07:01.30664917-05:00","dependencies":[{"issue_id":"zellij-crew-om9","depends_on_id":"zellij-crew-f6x","type":"parent","created_at":"2026-01-22T10:16:24.729128662-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-om9","depends_on_id":"zellij-crew-h9a","type":"blocks","created_at":"2026-01-22T10:16:25.958606265-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-ot5","title":"Rebuild tests framework","description":"We disabled the test framework for a re-design, now that we're mostly stable we should re-build the tests to test each feature, we should also look to see if there are zellij tests we should consider running. Some difficult challenges are manual testing requires clicking to add permissions to plugins twice and requires the special layout not the default one.","status":"open","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-28T06:54:16.920178771-05:00","created_by":"Karl Bunch","updated_at":"2026-01-28T06:54:16.920178771-05:00"}
{"id":"zellij-crew-q02","title":"Create new tab-bar module structure","description":"Set up the new tab-bar plugin structure:\n\n1. Restructure src/ for tab-bar rendering\n2. Add LinePart struct for styled output segments\n3. Create State struct extending current state with mode_info, tab_line cache\n4. Subscribe to ModeUpdate, Mouse events (in addition to TabUpdate)\n5. Implement basic render() that outputs tab names","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:05:08.982806763-05:00","created_by":"Karl Bunch","updated_at":"2026-01-23T05:58:58.139501759-05:00","closed_at":"2026-01-23T05:58:58.139501759-05:00","close_reason":"Restructured to lib.rs + modules (line.rs, tab.rs), added LinePart struct, extended State with mode_info/tab_line, subscribed to ModeUpdate/Mouse events, implemented basic render using zellij ribbon API","dependencies":[{"issue_id":"zellij-crew-q02","depends_on_id":"zellij-crew-4j0","type":"blocks","created_at":"2026-01-22T10:05:42.95489373-05:00","created_by":"Karl Bunch"}],"comments":[{"id":15,"issue_id":"zellij-crew-q02","author":"Karl Bunch","text":"Before starting this task, read DESIGN.md section 'Default Tab-Bar Plugin Analysis' which documents:\n- File structure (main.rs, tab.rs, line.rs patterns)\n- LinePart struct for styled output + width tracking\n- State struct and plugin lifecycle\n- Multi-user indicator pattern (template for activity indicators)\n- Integration point for our indicators\n\nThe zellij source was cloned to ~/zellij-source (or /mnt/c/Users/karl/zellij-source on WSL) - the default tab-bar is at default-plugins/tab-bar/src/\n\nKey decisions for this task:\n1. Keep existing src/main.rs or restructure to src/lib.rs + modules?\n2. Add new dependencies: ansi_term, unicode-width, zellij-tile-utils\n3. Create LinePart struct and basic State with mode_info","created_at":"2026-01-23T02:02:25Z"}]}
{"id":"zellij-crew-q4s","title":"Copy rust-toolchain.toml for WASM compatibility","description":"Copy rust-toolchain.toml from zellij-detach to ensure proper WASM target configuration","status":"closed","priority":2,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:02:34.64851436-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T16:10:51.692090646-05:00","closed_at":"2026-01-19T16:10:51.692090646-05:00","close_reason":"Closed","labels":["setup"]}
{"id":"zellij-crew-r3p","title":"Rebase on official zellij tab-bar source","description":"**Goal:** Use official zellij tab-bar source as base, not third-party reference plugin.\n\n**Source:** /home/karl/workspace-wsl/zellij/default-plugins/tab-bar/src/\n\n**Key learnings from official source:**\n1. Does NOT use serialize_ribbon() for tabs - uses ansi_term + style! macro directly\n2. Mouse click handling uses coordinate-based detection (get_tab_to_focus, get_clicked_line_part)\n3. LinePart tracks part (ANSI string), len (visual width), tab_index (for click detection)\n4. tab_style() is simpler than reference - no extra tab_index param for numbered indices\n5. Built-in doesn't need permission (we still do as third-party)\n\n**Approach:**\n1. Copy official line.rs and tab.rs verbatim\n2. Keep permission handling in main.rs (required for third-party)\n3. Modify render() to use our name allocation where t.name.clone() is called\n4. Add [‚óã] status indicator to tab name\n5. Test mouse clicks work correctly\n\n**Files to copy:**\n- zellij/default-plugins/tab-bar/src/line.rs\n- zellij/default-plugins/tab-bar/src/tab.rs\n\n**Why this matters:**\n- Mouse clicks should work (same code as working official)\n- Styling will match exactly\n- Simpler codebase to maintain","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-24T11:49:50.005791084-05:00","created_by":"Karl Bunch","updated_at":"2026-01-26T06:57:16.256467106-05:00","closed_at":"2026-01-26T06:57:16.256467106-05:00","close_reason":"Closed"}
{"id":"zellij-crew-s00","title":"Phase 2: Tab-Bar Plugin with Activity Indicators","description":"Evolve zellij-crew from a rename-only plugin into a full tab-bar replacement with activity indicators.\n\nKey components:\n- TabState: single source of truth for pane activity\n- Signal priority: pipe \u003e content_match \u003e timeout\n- Pipe protocol: zellij-crew:status for Claude hooks and shell integration\n- Sleeping state for honest uncertainty\n\nSee DESIGN.md Phase 2 section for full architecture.","status":"closed","priority":1,"issue_type":"epic","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T09:06:21.634729854-05:00","created_by":"Karl Bunch","updated_at":"2026-01-28T07:02:17.475502733-05:00","closed_at":"2026-01-28T07:02:17.475502733-05:00","close_reason":"Phase 2 core complete: tab-bar rendering, activity indicators, pipe protocol, hook integration. Content analysis and timeout detection moved to Future Enhancements."}
{"id":"zellij-crew-s34","title":"Implement basic tab rendering with indicators placeholder","description":"Implement render() to display tabs with allocated names:\n\n1. Style active vs inactive tabs\n2. Handle tab overflow (too many tabs for width)\n3. Add placeholder for activity indicators (populated in 2b)\n4. Support mouse clicks for tab switching\n5. Match default tab-bar visual style","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-22T10:05:12.623393666-05:00","created_by":"Karl Bunch","updated_at":"2026-01-24T05:32:56.330698834-05:00","closed_at":"2026-01-24T05:32:56.330698834-05:00","close_reason":"render() outputs tabs with names and [‚óã] placeholder indicators","dependencies":[{"issue_id":"zellij-crew-s34","depends_on_id":"zellij-crew-aja","type":"parent","created_at":"2026-01-22T10:05:42.368396957-05:00","created_by":"Karl Bunch"},{"issue_id":"zellij-crew-s34","depends_on_id":"zellij-crew-bk0","type":"blocks","created_at":"2026-01-22T10:05:44.13969463-05:00","created_by":"Karl Bunch"}]}
{"id":"zellij-crew-wet","title":"Mouse clicks don't switch tabs","description":"Clicking on tab names in the crew tab-bar doesn't switch tabs like the built-in zellij tab-bar does. The mouse handler code exists and matches zellij-tab-bar-indexed reference. Possible causes: 1) LinePart.len values don't match actual rendered widths (ANSI escape sequences being counted?), 2) Click position offset, 3) tab_line not being cached correctly between render and click event.","status":"closed","priority":2,"issue_type":"bug","owner":"karlbunch@karlbunch.com","created_at":"2026-01-24T11:40:08.092950421-05:00","created_by":"Karl Bunch","updated_at":"2026-01-24T11:50:00.86487506-05:00","closed_at":"2026-01-24T11:50:00.86487506-05:00","close_reason":"Will be fixed by rebasing on official tab-bar source (zellij-crew-r3p)"}
{"id":"zellij-crew-ycs","title":"Revert experimental code to working baseline","description":"Revert to commit 6203e6b (Phase 2b) which had basic working rename_tab logic before the experimental crew.rs refactoring broke it.\n\n**Actions**:\n1. git checkout 6203e6b -- src/main.rs\n2. rm src/crew.rs (experimental module that caused multi-instance issues)\n3. cp upstream tab.rs from official zellij (remove tab_index modifications)\n\n**Why**: The crew.rs refactoring introduced complexity without solving the root cause (layout structure). Reverting to known-working baseline, then applying minimal fixes.\n\n**Blocks**: zellij-crew-rename-fix (needs clean baseline to apply fixes)\n\n**Files**: src/main.rs, src/crew.rs, src/tab.rs","status":"closed","priority":1,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-24T18:29:48.821826868-05:00","created_by":"Karl Bunch","updated_at":"2026-01-28T06:55:07.302287084-05:00","closed_at":"2026-01-28T06:55:07.302287084-05:00","close_reason":"no longer valid"}
{"id":"zellij-crew-z7t","title":"Research existing zellij-tab-bar-indexed","description":"Read all code in ../zellij-tab-bar-indexed (only 865 lines of code) for examples of how others have approach tab naming plugins. Present analysis and decide if we need to update our plan.","notes":"## Research Complete - Key Findings\n\n### Architecture (839 lines total)\n- main.rs: State management, event handling, plugin lifecycle\n- tab.rs: Tab rendering and styling  \n- line.rs: Tab line layout, overflow handling\n\n### Critical Patterns to Adopt\n1. State struct with tabs Vec, active_tab_idx, mode_info\n2. Config loading from BTreeMap\u003cString, String\u003e\n3. Event subscription: TabUpdate, ModeUpdate, Mouse\n4. Permission: Request ReadApplicationState\n5. Dependencies: zellij-tile 0.43, unicode-width, ansi_term\n\n### What They DON'T Do (Our Differentiator)\n- No automatic tab renaming - display only\n- No name allocation logic\n- No position-based name tracking\n- No custom naming schemes\n\n### Build Setup\n- Target: wasm32-wasip1 (set in .cargo/config.toml)\n- Release optimizations: opt-level=\"s\", lto=true, strip=true\n\n### Recommendation\nProceed with existing plan. Their plugin is good reference for boilerplate but our core functionality (automatic renaming with name pools) is entirely different.","status":"closed","priority":0,"issue_type":"task","owner":"karlbunch@karlbunch.com","created_at":"2026-01-19T11:06:19.909793223-05:00","created_by":"Karl Bunch","updated_at":"2026-01-19T12:31:39.221356189-05:00","closed_at":"2026-01-19T12:31:39.221356189-05:00","close_reason":"Closed","labels":["research"]}
